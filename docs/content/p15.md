#  Semana 15 - Tutorial: Consumo de una API RESTful con HTML, CSS y JavaScript usando MockAPI.io

Este tutorial te guiará paso a paso para crear una interfaz web que consuma una API RESTful generada con **MockAPI.io**. Aprenderás a realizar operaciones CRUD (Crear, Leer, Actualizar, Eliminar) sobre una entidad, utilizando **HTML**, **CSS** y **JavaScript** con la API Fetch. La interfaz será responsiva, manejará errores y actualizará el DOM dinámicamente. En este caso, usaremos una API de gestión de tareas como ejemplo.

## Prerrequisitos
- Conocimientos básicos de **HTML**, **CSS** y **JavaScript**.
- Acceso a un navegador web moderno.
- Una cuenta en [MockAPI.io](https://mockapi.io/) para crear una API simulada.

## Paso 1: Configurar la API en MockAPI.io

1. **Crea una cuenta**:
   
      - Visita [MockAPI.io](https://mockapi.io/) y regístrate o inicia sesión.
  
2. **Crea un proyecto**:
   
      - Haz clic en "New Project" y nómbralo, por ejemplo, "TaskManager".
  
3. **Define una entidad**:
   
      - Crea una nueva entidad llamada `tasks` con los siguientes campos:
        - `id` (generado automáticamente por MockAPI).
        - `title` (tipo String, por ejemplo, "Comprar víveres").
        - `completed` (tipo Boolean, por ejemplo, false).
      - Opcional: Agrega un campo `category` (tipo String) para un ejemplo extendido.
  
4. **Genera datos de prueba**:
   
      - Usa la opción de MockAPI para generar datos de ejemplo (por ejemplo, 5 tareas).
  
5. **Obtén la URL base de la API**:
   
      - MockAPI te proporcionará una URL base, como `https://<project-id>.mockapi.io/api/v1/tasks`. Guárdala, ya que la usarás en el código.

**Endpoints disponibles**:

- `GET /tasks`: Obtiene todas las tareas.
- `POST /tasks`: Crea una nueva tarea.
- `PUT /tasks/:id`: Actualiza una tarea existente.
- `DELETE /tasks/:id`: Elimina una tarea.
- Opcional: `GET /tasks?category=valor` para filtrar por categoría (si se incluye el campo `category`).

## Paso 2: Crear la estructura HTML
Crea un archivo `index.html` con un formulario para agregar tareas y una lista para mostrarlas.

```html
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión de Tareas con MockAPI</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    .form-container {
      margin-bottom: 20px;
    }
    input, button {
      padding: 8px;
      margin: 5px;
    }
    .task-list {
      list-style: none;
      padding: 0;
    }
    .task-item {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 5px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .error {
      color: red;
    }
    @media (max-width: 600px) {
      input, button {
        width: 100%;
        box-sizing: border-box;
      }
    }
  </style>
</head>
<body>
  <h1>Gestión de Tareas</h1>
  <div class="form-container">
    <input type="text" id="taskTitle" placeholder="Título de la tarea" required>
    <button onclick="crearTarea()">Crear Tarea</button>
  </div>
  <p id="mensaje" class="error"></p>
  <ul id="taskList" class="task-list"></ul>
</body>
</html>
```

**Explicación**:

- **HTML**: Incluye un formulario con un campo de texto para el título de la tarea y un botón para crearla. Una lista (`<ul>`) mostrará las tareas.
- **CSS**: Define un diseño limpio y responsivo usando media queries para adaptarse a dispositivos móviles.

## Paso 3: Implementar el consumo de la API con JavaScript
Agrega el siguiente script al final del `<body>` en `index.html` para consumir la API de MockAPI.io.

```javascript
<script>
  const API_URL = 'https://<project-id>.mockapi.io/api/v1/tasks'; // Reemplaza con tu URL de MockAPI
  const taskList = document.getElementById('taskList');
  const taskTitle = document.getElementById('taskTitle');
  const mensaje = document.getElementById('mensaje');

  // Cargar tareas al iniciar
  cargarTareas();

  // Función para cargar y mostrar tareas
  async function cargarTareas() {
    try {
      const response = await fetch(API_URL);
      if (!response.ok) throw new Error('Error al cargar tareas');
      const tareas = await response.json();
      taskList.innerHTML = '';
      tareas.forEach(tarea => {
        const li = document.createElement('li');
        li.className = 'task-item';
        li.innerHTML = `
          <span>${tarea.title} ${tarea.completed ? '(Completada)' : ''}</span>
          <div>
            <button onclick="editarTarea(${tarea.id}, '${tarea.title}', ${tarea.completed})">Editar</button>
            <button onclick="eliminarTarea(${tarea.id})">Eliminar</button>
          </div>
        `;
        taskList.appendChild(li);
      });
    } catch (error) {
      mensaje.textContent = error.message;
    }
  }

  // Función para crear una tarea
  async function crearTarea() {
    const title = taskTitle.value.trim();
    if (!title) {
      mensaje.textContent = 'El título es obligatorio';
      return;
    }
    try {
      const response = await fetch(API_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ title, completed: false })
      });
      if (!response.ok) throw new Error('Error al crear tarea');
      taskTitle.value = '';
      mensaje.textContent = 'Tarea creada con éxito';
      cargarTareas();
    } catch (error) {
      mensaje.textContent = error.message;
    }
  }

  // Función para editar una tarea
  async function editarTarea(id, currentTitle, currentCompleted) {
    const newTitle = prompt('Editar título:', currentTitle);
    const newCompleted = confirm('¿La tarea está completada?');
    if (newTitle && newTitle.trim()) {
      try {
        const response = await fetch(`${API_URL}/${id}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ title: newTitle.trim(), completed: newCompleted })
        });
        if (!response.ok) throw new Error('Error al editar tarea');
        mensaje.textContent = 'Tarea editada con éxito';
        cargarTareas();
      } catch (error) {
        mensaje.textContent = error.message;
      }
    }
  }

  // Función para eliminar una tarea
  async function eliminarTarea(id) {
    if (confirm('¿Seguro que quieres eliminar esta tarea?')) {
      try {
        const response = await fetch(`${API_URL}/${id}`, {
          method: 'DELETE'
        });
        if (!response.ok) throw new Error('Error al eliminar tarea');
        mensaje.textContent = 'Tarea eliminada con éxito';
        cargarTareas();
      } catch (error) {
        mensaje.textContent = error.message;
      }
    }
  }
</script>
```

**Explicación**:

- **API_URL**: Reemplaza `<project-id>` con el ID de tu proyecto en MockAPI.io.
- **cargarTareas**: Usa `GET /tasks` para obtener todas las tareas y las muestra dinámicamente en el DOM.
- **crearTarea**: Valida el título, envía un `POST /tasks` con el título y `completed: false`.
- **editarTarea**: Usa `prompt` y `confirm` para actualizar el título y el estado `completed`, enviando un `PUT /tasks/:id`.
- **eliminarTarea**: Confirma la eliminación y envía un `DELETE /tasks/:id`.
- **Manejo de errores**: Usa `try-catch` para capturar errores y muestra mensajes al usuario.

## Paso 4: Probar la aplicación
1. **Ejecuta la aplicación**:
   
      - Guarda el archivo `index.html` y ábrelo en un navegador (puedes usar una extensión como Live Server en VS Code para un servidor local).
  
2. **Prueba las operaciones CRUD**:
   
      - **Crear**: Ingresa un título y haz clic en "Crear Tarea".
      - **Leer**: Verifica que las tareas se muestren en la lista al cargar la página.
      - **Actualizar**: Haz clic en "Editar" para modificar el título o el estado de una tarea.
      - **Eliminar**: Haz clic en "Eliminar" y confirma para borrar una tarea.

3. **Verifica en MockAPI**:
   
      - Accede al panel de MockAPI.io para confirmar que las tareas se crean, actualizan o eliminan en la base de datos simulada.

## Paso 5: Agregar funcionalidad adicional (Opcional)
Si tu API incluye un campo `category`, puedes extender la interfaz para filtrar tareas por categoría.

1. **Modifica el HTML**:
   Agrega un `<select>` para seleccionar categorías:
   ```html
   <div class="form-container">
     <input type="text" id="taskTitle" placeholder="Título de la tarea" required>
     <select id="categorySelect">
       <option value="">Todas las categorías</option>
     </select>
     <button onclick="crearTarea()">Crear Tarea</button>
   </div>
   ```

2. **Actualiza el JavaScript**:
   Agrega funciones para cargar categorías y filtrar tareas:
   ```javascript
   const categorySelect = document.getElementById('categorySelect');

   // Cargar categorías al iniciar
   async function cargarCategorias() {
     try {
       const response = await fetch('https://<project-id>.mockapi.io/api/v1/categories');
       if (!response.ok) throw new Error('Error al cargar categorías');
       const categorias = await response.json();
       categorias.forEach(categoria => {
         const option = document.createElement('option');
         option.value = categoria.name;
         option.textContent = categoria.name;
         categorySelect.appendChild(option);
       });
     } catch (error) {
       mensaje.textContent = error.message;
     }
   }

   // Modificar cargarTareas para filtrar por categoría
   async function cargarTareas() {
     const category = categorySelect.value;
     const url = category ? `${API_URL}?category=${category}` : API_URL;
     try {
       const response = await fetch(url);
       if (!response.ok) throw new Error('Error al cargar tareas');
       const tareas = await response.json();
       taskList.innerHTML = '';
       tareas.forEach(tarea => {
         const li = document.createElement('li');
         li.className = 'task-item';
         li.innerHTML = `
           <span>${tarea.title} (${tarea.category || 'Sin categoría'}) ${tarea.completed ? '(Completada)' : ''}</span>
           <div>
             <button onclick="editarTarea(${tarea.id}, '${tarea.title}', ${tarea.completed}, '${tarea.category || ''}')">Editar</button>
             <button onclick="eliminarTarea(${tarea.id})">Eliminar</button>
           </div>
         `;
         taskList.appendChild(li);
       });
     } catch (error) {
       mensaje.textContent = error.message;
     }
   }

   // Modificar crearTarea para incluir categoría
   async function crearTarea() {
     const title = taskTitle.value.trim();
     const category = categorySelect.value || null;
     if (!title) {
       mensaje.textContent = 'El título es obligatorio';
       return;
     }
     try {
       const response = await fetch(API_URL, {
         method: 'POST',
         headers: { 'Content-Type': 'application/json' },
         body: JSON.stringify({ title, completed: false, category })
       });
       if (!response.ok) throw new Error('Error al crear tarea');
       taskTitle.value = '';
       mensaje.textContent = 'Tarea creada con éxito';
       cargarTareas();
     } catch (error) {
       mensaje.textContent = error.message;
     }
   }

   // Modificar editarTarea para incluir categoría
   async function editarTarea(id, currentTitle, currentCompleted, currentCategory) {
     const newTitle = prompt('Editar título:', currentTitle);
     const newCompleted = confirm('¿La tarea está completada?');
     const newCategory = prompt('Editar categoría:', currentCategory);
     if (newTitle && newTitle.trim()) {
       try {
         const response = await fetch(`${API_URL}/${id}`, {
           method: 'PUT',
           headers: { 'Content-Type': 'application/json' },
           body: JSON.stringify({ title: newTitle.trim(), completed: newCompleted, category: newCategory || null })
         });
         if (!response.ok) throw new Error('Error al editar tarea');
         mensaje.textContent = 'Tarea editada con éxito';
         cargarTareas();
       } catch (error) {
         mensaje.textContent = error.message;
       }
     }
   }

   // Actualizar tareas al cambiar categoría
   categorySelect.addEventListener('change', cargarTareas);

   // Cargar categorías al iniciar
   cargarCategorias();
   ```

3. **Configura la entidad `categories` en MockAPI**:
   
      - Crea una entidad `categories` con un campo `name` (tipo String, por ejemplo, "Trabajo", "Personal").
      - Genera datos de prueba para las categorías.

**Explicación**:

- **cargarCategorias**: Obtiene las categorías desde `GET /categories` y llena el `<select>`.
- **cargarTareas**: Filtra tareas por categoría usando `GET /tasks?category=valor`.
- **crearTarea y editarTarea**: Incluyen el campo `category` en las solicitudes `POST` y `PUT`.

## Paso 6: Documentar el proyecto
Crea un archivo `README.md` para documentar tu proyecto:


# Gestión de Tareas con MockAPI.io

## Descripción
Una aplicación web que consume una API RESTful creada con MockAPI.io para gestionar tareas. Permite realizar operaciones CRUD (Crear, Leer, Actualizar, Eliminar) sobre tareas, con un diseño responsivo y manejo de errores.

## Requisitos
- Navegador web moderno.
- API configurada en [MockAPI.io](https://mockapi.io/) con la entidad `tasks` (campos: `id`, `title`, `completed`, opcional: `category`).

## Cómo ejecutar
1. Clona este repositorio o copia el código de `index.html`.
2. Reemplaza `API_URL` en el script con la URL de tu proyecto en MockAPI.io.
3. Abre `index.html` en un navegador (puedes usar un servidor local como Live Server).

## Endpoints consumidos
- `GET /tasks`: Obtiene todas las tareas.
- `POST /tasks`: Crea una nueva tarea.
- `PUT /tasks/:id`: Actualiza una tarea.
- `DELETE /tasks/:id`: Elimina una tarea.
- Opcional: `GET /tasks?category=valor` para filtrar por categoría.
- Opcional: `GET /categories` para obtener categorías.

## Ejemplo de uso
1. Ingresa un título y selecciona una categoría (si aplica) para crear una tarea.
2. La lista de tareas se actualiza automáticamente.
3. Usa los botones "Editar" y "Eliminar" para modificar o borrar tareas.
4. Filtra tareas por categoría usando el menú desplegable.

## Dependencias
- Ninguna (usa la API Fetch nativa y CSS puro).




