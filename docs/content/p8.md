#  Semana 8 - Objetos y Técnicas Avanzadas en JavaScript

!!! info "Introducción"
    En esta semana continuamos con las **estructuras de datos** en JavaScript, enfocándonos en los objetos, la desestructuración y técnicas avanzadas. Aprenderemos a manipular objetos de manera eficiente, usar la desestructuración para extraer datos de forma elegante, y aplicar métodos avanzados de arreglos para resolver problemas complejos. 🚀

---

## 📦 Objetos

Los **objetos** son estructuras de datos que almacenan pares clave-valor y son fundamentales en JavaScript.

### **Creación y manipulación de objetos**

```javascript
// Diferentes formas de crear objetos
const persona = {
    nombre: 'Ana',
    edad: 25,
    profesion: 'Desarrolladora',
    activo: true
};

// Usando el constructor Object
const objeto = new Object();
objeto.propiedad = 'valor';

// Acceso a propiedades
console.log(persona.nombre); // 'Ana'
console.log(persona['edad']); // 25

// Agregar propiedades
persona.email = 'ana@example.com';
persona['telefono'] = '123-456-7890';

// Modificar propiedades
persona.edad = 26;

// Eliminar propiedades
delete persona.activo;

console.log(persona);
```

### **Métodos de objetos**

```javascript
const usuario = {
    nombre: 'Carlos',
    edad: 30,
    saludar: function() {
        return `Hola, soy ${this.nombre}`;
    },
    // Método con arrow function (cuidado con 'this')
    obtenerInfo: () => {
        return 'Información del usuario';
    },
    // Método abreviado (ES6)
    cumplirAnos() {
        this.edad++;
        return this.edad;
    }
};

console.log(usuario.saludar()); // "Hola, soy Carlos"
console.log(usuario.cumplirAnos()); // 31
```

### **Object.keys(), Object.values() y Object.entries()**

```javascript
const producto = {
    id: 1,
    nombre: 'Laptop',
    precio: 1000,
    categoria: 'Electrónicos'
};

// Object.keys() - Obtiene las claves
const claves = Object.keys(producto);
console.log(claves); // ['id', 'nombre', 'precio', 'categoria']

// Object.values() - Obtiene los valores
const valores = Object.values(producto);
console.log(valores); // [1, 'Laptop', 1000, 'Electrónicos']

// Object.entries() - Obtiene pares clave-valor
const entradas = Object.entries(producto);
console.log(entradas); // [['id', 1], ['nombre', 'Laptop'], ...]

// Iterar sobre un objeto
Object.entries(producto).forEach(([clave, valor]) => {
    console.log(`${clave}: ${valor}`);
});
```

### **Object.assign() y spread operator**

```javascript
const base = { a: 1, b: 2 };
const extension = { c: 3, d: 4 };
const sobreescritura = { b: 5, e: 6 };

// Object.assign() - Copia propiedades
const combinado1 = Object.assign({}, base, extension, sobreescritura);
console.log(combinado1); // { a: 1, b: 5, c: 3, d: 4, e: 6 }

// Spread operator (más moderno)
const combinado2 = { ...base, ...extension, ...sobreescritura };
console.log(combinado2); // { a: 1, b: 5, c: 3, d: 4, e: 6 }

// Clonar objeto
const clon = { ...base };
console.log(clon); // { a: 1, b: 2 }
```

---

## 🎯 Desestructuración

La **desestructuración** es una sintaxis que permite extraer valores de arreglos u objetos de manera más concisa.

### **Desestructuración de arreglos**

```javascript
const colores = ['rojo', 'verde', 'azul', 'amarillo', 'morado'];

// Desestructuración básica
const [primero, segundo, tercero] = colores;
console.log(primero); // 'rojo'
console.log(segundo); // 'verde'
console.log(tercero); // 'azul'

// Saltar elementos
const [, , tercer, , quinto] = colores;
console.log(tercer); // 'azul'
console.log(quinto); // 'morado'

// Valores por defecto
const [a, b, c, d, e, f = 'negro'] = colores;
console.log(f); // 'negro'

// Rest operator
const [principal, ...resto] = colores;
console.log(principal); // 'rojo'
console.log(resto); // ['verde', 'azul', 'amarillo', 'morado']

// Intercambiar variables
let x = 1, y = 2;
[x, y] = [y, x];
console.log(x, y); // 2, 1
```

### **Desestructuración de objetos**

```javascript
const persona = {
    nombre: 'Ana',
    edad: 25,
    profesion: 'Desarrolladora',
    direccion: {
        ciudad: 'Madrid',
        pais: 'España'
    }
};

// Desestructuración básica
const { nombre, edad, profesion } = persona;
console.log(nombre); // 'Ana'
console.log(edad); // 25

// Renombrar variables
const { nombre: nombreCompleto, edad: años } = persona;
console.log(nombreCompleto); // 'Ana'
console.log(años); // 25

// Valores por defecto
const { nombre: nom, email = 'no@disponible.com' } = persona;
console.log(email); // 'no@disponible.com'

// Desestructuración anidada
const { direccion: { ciudad, pais } } = persona;
console.log(ciudad); // 'Madrid'
console.log(pais); // 'España'

// Rest operator en objetos
const { nombre: n, ...restoPersona } = persona;
console.log(restoPersona); // { edad: 25, profesion: 'Desarrolladora', direccion: {...} }
```

### **Desestructuración en parámetros de funciones**

```javascript
// Con objetos
function presentarPersona({ nombre, edad, profesion = 'No especificada' }) {
    return `Hola, soy ${nombre}, tengo ${edad} años y soy ${profesion}`;
}

const usuario = { nombre: 'Carlos', edad: 30 };
console.log(presentarPersona(usuario));

// Con arreglos
function sumarPrimerosDos([a, b]) {
    return a + b;
}

const numeros = [5, 3, 8, 1];
console.log(sumarPrimerosDos(numeros)); // 8

// Ejemplo avanzado: configuración de API
function hacerPeticion({
    url,
    metodo = 'GET',
    headers = {},
    timeout = 5000
}) {
    console.log(`${metodo} ${url}`);
    console.log('Headers:', headers);
    console.log('Timeout:', timeout);
}

hacerPeticion({
    url: '/api/usuarios',
    metodo: 'POST',
    headers: { 'Content-Type': 'application/json' }
});
```

---

## 🔄 Métodos Avanzados de Arreglos

### **flatMap() y flat()**

```javascript
// flat() - Aplana arreglos anidados
const anidado = [1, [2, 3], [4, [5, 6]]];
const aplanado1 = anidado.flat(); // Un nivel
const aplanado2 = anidado.flat(2); // Dos niveles

console.log(aplanado1); // [1, 2, 3, 4, [5, 6]]
console.log(aplanado2); // [1, 2, 3, 4, 5, 6]

// flatMap() - Combina map() y flat()
const frases = ['hola mundo', 'javascript es genial'];
const palabras = frases.flatMap(frase => frase.split(' '));
console.log(palabras); // ['hola', 'mundo', 'javascript', 'es', 'genial']
```

### **Array.from() y Array.of()**

```javascript
// Array.from() - Crea arreglo desde iterable
const cadena = 'Hola';
const arregloLetras = Array.from(cadena);
console.log(arregloLetras); // ['H', 'o', 'l', 'a']

// Con función de mapeo
const numeros = Array.from({ length: 5 }, (_, i) => i + 1);
console.log(numeros); // [1, 2, 3, 4, 5]

// Array.of() - Crea arreglo con elementos dados
const arreglo = Array.of(1, 2, 3, 4, 5);
console.log(arreglo); // [1, 2, 3, 4, 5]
```

---

## 🛠️ Ejemplos Prácticos

### **Sistema de gestión de estudiantes**

```javascript
const estudiantes = [
    { id: 1, nombre: 'Ana', edad: 20, notas: [85, 90, 78, 92] },
    { id: 2, nombre: 'Carlos', edad: 22, notas: [76, 88, 82, 79] },
    { id: 3, nombre: 'Lucía', edad: 19, notas: [95, 87, 91, 89] },
    { id: 4, nombre: 'Miguel', edad: 21, notas: [68, 72, 75, 70] }
];

// Calcular promedio de cada estudiante
const estudiantesConPromedio = estudiantes.map(estudiante => {
    const promedio = estudiante.notas.reduce((sum, nota) => sum + nota, 0) / estudiante.notas.length;
    return { ...estudiante, promedio: Math.round(promedio * 100) / 100 };
});

// Filtrar estudiantes aprobados (promedio >= 80)
const aprobados = estudiantesConPromedio.filter(est => est.promedio >= 80);

// Encontrar el mejor estudiante
const mejorEstudiante = estudiantesConPromedio.reduce((mejor, actual) => 
    actual.promedio > mejor.promedio ? actual : mejor
);

// Verificar si todos pasaron
const todosAprobaron = estudiantesConPromedio.every(est => est.promedio >= 70);

console.log('Estudiantes con promedio:', estudiantesConPromedio);
console.log('Aprobados:', aprobados);
console.log('Mejor estudiante:', mejorEstudiante);
console.log('Todos aprobaron:', todosAprobaron);
```

### **Carrito de compras**

```javascript
class CarritoCompras {
    constructor() {
        this.items = [];
    }
    
    agregarItem({ id, nombre, precio, cantidad = 1 }) {
        const itemExistente = this.items.find(item => item.id === id);
        
        if (itemExistente) {
            itemExistente.cantidad += cantidad;
        } else {
            this.items.push({ id, nombre, precio, cantidad });
        }
    }
    
    removerItem(id) {
        this.items = this.items.filter(item => item.id !== id);
    }
    
    actualizarCantidad(id, nuevaCantidad) {
        const item = this.items.find(item => item.id === id);
        if (item) {
            item.cantidad = nuevaCantidad;
        }
    }
    
    calcularTotal() {
        return this.items.reduce((total, item) => {
            return total + (item.precio * item.cantidad);
        }, 0);
    }
    
    obtenerResumen() {
        const total = this.calcularTotal();
        const cantidadItems = this.items.reduce((sum, item) => sum + item.cantidad, 0);
        
        return {
            items: [...this.items],
            cantidadTotal: cantidadItems,
            precioTotal: total,
            itemsUnicos: this.items.length
        };
    }
    
    aplicarDescuento(porcentaje) {
        return this.items.map(item => ({
            ...item,
            precioConDescuento: item.precio * (1 - porcentaje / 100)
        }));
    }
}

// Uso del carrito
const carrito = new CarritoCompras();

carrito.agregarItem({ id: 1, nombre: 'Laptop', precio: 1000 });
carrito.agregarItem({ id: 2, nombre: 'Mouse', precio: 25, cantidad: 2 });
carrito.agregarItem({ id: 3, nombre: 'Teclado', precio: 75 });
carrito.agregarItem({ id: 1, nombre: 'Laptop', precio: 1000 }); // Incrementa cantidad

console.log('Resumen del carrito:', carrito.obtenerResumen());
console.log('Items con descuento 10%:', carrito.aplicarDescuento(10));
```

---

## 🛑 Buenas Prácticas

1. **Usa métodos inmutables** cuando sea posible (map, filter, reduce)
2. **Prefiere desestructuración** para extraer valores
3. **Usa spread operator** para clonar arreglos y objetos
4. **Evita mutar arreglos directamente** en funciones
5. **Usa nombres descriptivos** para variables desestructuradas
6. **Combina métodos de arreglo** para operaciones complejas
7. **Valida datos** antes de aplicar métodos
8. **Usa const** para arreglos y objetos que no se reasignan

!!! tip "Rendimiento"
    Los métodos como `map()`, `filter()` y `reduce()` crean nuevos arreglos. Para arreglos muy grandes, considera el impacto en memoria y rendimiento.

---
