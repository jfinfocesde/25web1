#  Semana 9 - Generalidades del DOM en JavaScript

## ¿Qué es el DOM?

El **DOM (Document Object Model)** es una representación estructurada de un documento HTML o XML que permite a JavaScript interactuar con los elementos de una página web. Piensa en el DOM como un árbol genealógico de tu página web, donde cada elemento HTML es un "nodo" que puede tener padres, hijos y hermanos.

### Analogía del DOM

Imagina que tu página web es como un edificio:
- El documento HTML es el edificio completo
- Cada elemento HTML (`<div>`, `<p>`, `<img>`, etc.) es una habitación
- Los atributos son las características de cada habitación (color, tamaño, etc.)
- El contenido de texto son los muebles dentro de cada habitación

## Estructura del DOM

Cuando el navegador carga una página HTML, crea automáticamente el DOM. Veamos un ejemplo:

```html
<!DOCTYPE html>
<html>
<head>
    <title>Mi Página</title>
</head>
<body>
    <h1>Bienvenido</h1>
    <div class="contenedor">
        <p>Este es un párrafo</p>
        <button id="miBoton">Hacer clic</button>
    </div>
</body>
</html>
```

Este HTML se convierte en un árbol DOM así:

```
Document
└── html
    ├── head
    │   └── title
    │       └── "Mi Página"
    └── body
        ├── h1
        │   └── "Bienvenido"
        └── div (class="contenedor")
            ├── p
            │   └── "Este es un párrafo"
            └── button (id="miBoton")
                └── "Hacer clic"
```

## Tipos de Nodos en el DOM

### 1. Nodos de Elemento
Representan las etiquetas HTML como `<div>`, `<p>`, `<img>`, etc.

```javascript
// Ejemplo: obtener un elemento
const titulo = document.querySelector('h1');
console.log(titulo.nodeName); // "H1"
console.log(titulo.nodeType); // 1 (ELEMENT_NODE)
```

### 2. Nodos de Texto
Contienen el texto dentro de los elementos.

```javascript
// El texto "Bienvenido" es un nodo de texto
const textoTitulo = titulo.firstChild;
console.log(textoTitulo.nodeType); // 3 (TEXT_NODE)
console.log(textoTitulo.textContent); // "Bienvenido"
```

### 3. Nodos de Atributo
Representan los atributos de los elementos HTML.

```javascript
// Ejemplo con un elemento que tiene atributos
const boton = document.getElementById('miBoton');
console.log(boton.id); // "miBoton"
console.log(boton.getAttribute('id')); // "miBoton"
```

## El Objeto Document

El objeto `document` es tu punto de entrada al DOM. Es como la llave maestra que te permite acceder a cualquier parte de tu página web.

### Propiedades Importantes del Document

```javascript
// Información básica del documento
console.log(document.title); // Título de la página
console.log(document.URL); // URL actual

// Elementos principales
console.log(document.documentElement); // Elemento <html>
console.log(document.head); // Elemento <head>
console.log(document.body); // Elemento <body>
```

### Ejemplo Práctico: Información de la Página

```javascript
// Crear una función que muestre información de la página
function mostrarInfoPagina() {
    console.log('=== INFORMACIÓN DE LA PÁGINA ===');
    console.log('Título:', document.title);
    console.log('URL:', document.URL);
    console.log('Última modificación:', document.lastModified);
    console.log('Número total de elementos:', document.all.length);
}

// Llamar la función
mostrarInfoPagina();
```

## Navegación por el DOM

Una vez que tienes un elemento, puedes navegar a sus elementos relacionados:

### Relaciones Familiares en el DOM

```html
<div id="padre">
    <p id="hijo1">Primer hijo</p>
    <p id="hijo2">Segundo hijo</p>
    <span id="hijo3">Tercer hijo</span>
</div>
```

```javascript
const padre = document.getElementById('padre');
const primerHijo = document.getElementById('hijo1');

// Navegación desde el padre
console.log(padre.children); // Todos los hijos elementos
console.log(padre.firstElementChild); // Primer hijo elemento
console.log(padre.lastElementChild); // Último hijo elemento
console.log(padre.childElementCount); // Número de hijos elementos

// Navegación desde un hijo
console.log(primerHijo.parentElement); // El elemento padre
console.log(primerHijo.nextElementSibling); // Siguiente hermano
console.log(primerHijo.previousElementSibling); // Hermano anterior (null en este caso)
```

### Ejemplo Práctico: Explorador de DOM

```javascript
function explorarElemento(elemento) {
    console.log('=== EXPLORANDO ELEMENTO ===');
    console.log('Etiqueta:', elemento.tagName);
    console.log('ID:', elemento.id || 'Sin ID');
    console.log('Clases:', elemento.className || 'Sin clases');
    console.log('Número de hijos:', elemento.children.length);
    
    if (elemento.parentElement) {
        console.log('Padre:', elemento.parentElement.tagName);
    }
    
    if (elemento.nextElementSibling) {
        console.log('Siguiente hermano:', elemento.nextElementSibling.tagName);
    }
    
    if (elemento.previousElementSibling) {
        console.log('Hermano anterior:', elemento.previousElementSibling.tagName);
    }
}

// Usar el explorador
const miElemento = document.getElementById('hijo2');
explorarElemento(miElemento);
```

## Colecciones de Elementos

El DOM devuelve diferentes tipos de colecciones:

### HTMLCollection vs NodeList

```javascript
// HTMLCollection (elementos vivos - se actualizan automáticamente)
const divs = document.getElementsByTagName('div');
console.log('Divs encontrados:', divs.length);

// NodeList (puede ser vivo o estático dependiendo del método)
const parrafos = document.querySelectorAll('p');
console.log('Párrafos encontrados:', parrafos.length);

// Diferencia práctica
console.log('Antes de agregar elemento:');
console.log('HTMLCollection length:', divs.length);
console.log('NodeList length:', parrafos.length);

// Agregar un nuevo div
const nuevoDiv = document.createElement('div');
document.body.appendChild(nuevoDiv);

console.log('Después de agregar elemento:');
console.log('HTMLCollection length:', divs.length); // Se actualiza automáticamente
console.log('NodeList length:', parrafos.length); // No se actualiza
```

### Convertir Colecciones a Arrays

```javascript
// Método moderno (recomendado)
const elementosArray = Array.from(document.querySelectorAll('p'));

// Método con spread operator
const elementosArray2 = [...document.querySelectorAll('p')];

// Ahora puedes usar métodos de array
elementosArray.forEach((elemento, indice) => {
    console.log(`Párrafo ${indice + 1}:`, elemento.textContent);
});
```

## Eventos y el DOM

El DOM no solo te permite leer y modificar elementos, sino también responder a eventos:

### Ejemplo Básico de Eventos

```javascript
// Esperar a que el DOM esté completamente cargado
document.addEventListener('DOMContentLoaded', function() {
    console.log('¡El DOM está listo!');
    
    // Ahora es seguro trabajar con elementos
    const boton = document.getElementById('miBoton');
    
    if (boton) {
        boton.addEventListener('click', function() {
            console.log('¡Botón clickeado!');
        });
    }
});
```

## Ejercicios Prácticos

### Ejercicio 1: Inspector de Página

Crea una función que analice la estructura básica de cualquier página:

```javascript
function analizarPagina() {
    const analisis = {
        titulo: document.title,
        url: document.URL,
        totalElementos: document.all.length,
        totalImagenes: document.images.length,
        totalEnlaces: document.links.length,
        totalFormularios: document.forms.length
    };
    
    console.table(analisis);
    return analisis;
}

// Ejecutar el análisis
analizarPagina();
```

### Ejercicio 2: Contador de Elementos

```javascript
function contarElementosPorTipo() {
    const tipos = ['div', 'p', 'span', 'img', 'a', 'button', 'input'];
    const conteos = {};
    
    tipos.forEach(tipo => {
        conteos[tipo] = document.getElementsByTagName(tipo).length;
    });
    
    console.log('=== CONTEO DE ELEMENTOS ===');
    for (const [tipo, cantidad] of Object.entries(conteos)) {
        console.log(`${tipo.toUpperCase()}: ${cantidad}`);
    }
    
    return conteos;
}

contarElementosPorTipo();
```

### Ejercicio 3: Navegador de Jerarquía

```javascript
function mostrarJerarquia(elemento, nivel = 0) {
    const indentacion = '  '.repeat(nivel);
    const info = `${elemento.tagName}${elemento.id ? '#' + elemento.id : ''}${elemento.className ? '.' + elemento.className.replace(/ /g, '.') : ''}`;
    
    console.log(indentacion + info);
    
    // Mostrar hijos recursivamente
    Array.from(elemento.children).forEach(hijo => {
        mostrarJerarquia(hijo, nivel + 1);
    });
}

// Mostrar la jerarquía completa del body
console.log('=== JERARQUÍA DEL DOM ===');
mostrarJerarquia(document.body);
```

## Mejores Prácticas

### 1. Esperar a que el DOM esté listo

```javascript
// ✅ Correcto
document.addEventListener('DOMContentLoaded', function() {
    // Tu código aquí
});

// ❌ Incorrecto (puede ejecutarse antes de que el DOM esté listo)
const elemento = document.getElementById('miElemento');
```

### 2. Verificar que los elementos existen

```javascript
// ✅ Correcto
const boton = document.getElementById('miBoton');
if (boton) {
    boton.addEventListener('click', manejarClick);
} else {
    console.warn('Elemento con ID "miBoton" no encontrado');
}

// ❌ Incorrecto (puede causar errores)
document.getElementById('miBoton').addEventListener('click', manejarClick);
```

### 3. Usar métodos modernos

```javascript
// ✅ Moderno y flexible
const elementos = document.querySelectorAll('.mi-clase');

// ❌ Menos flexible
const elementos = document.getElementsByClassName('mi-clase');
```

