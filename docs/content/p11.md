#  Semana 11 - Modificación de Elementos HTML desde JavaScript

## Introducción a la Modificación del DOM

Una vez que sabemos cómo seleccionar elementos del DOM, el siguiente paso es **modificarlos**. JavaScript nos permite cambiar prácticamente cualquier aspecto de los elementos HTML: su contenido, atributos, estilos, estructura y más. Es como tener superpoderes para transformar tu página web en tiempo real.

## Modificación de Contenido

### 1. textContent - Texto Plano

La propiedad `textContent` permite leer y modificar solo el texto de un elemento, ignorando cualquier HTML.

```html
<div id="mensaje">
    <strong>Hola</strong> mundo
    <span>¡Bienvenido!</span>
</div>
<p id="descripcion">Esta es una descripción inicial</p>
```

```javascript
const mensaje = document.getElementById('mensaje');
const descripcion = document.getElementById('descripcion');

// Leer contenido de texto
console.log(mensaje.textContent); // "Hola mundo ¡Bienvenido!"
console.log(descripcion.textContent); // "Esta es una descripción inicial"

// Modificar contenido de texto
descripcion.textContent = 'Nueva descripción actualizada';
mensaje.textContent = 'Texto completamente nuevo';

// Agregar texto al existente
descripcion.textContent += ' - Texto agregado';
```

### 2. innerHTML - HTML Completo

La propiedad `innerHTML` permite leer y modificar el HTML completo dentro de un elemento.

```html
<div id="contenedor">
    <p>Contenido original</p>
</div>
<ul id="lista">
    <li>Item 1</li>
    <li>Item 2</li>
</ul>
```

```javascript
const contenedor = document.getElementById('contenedor');
const lista = document.getElementById('lista');

// Leer HTML interno
console.log(contenedor.innerHTML); // "<p>Contenido original</p>"

// Reemplazar HTML completo
contenedor.innerHTML = `
    <h2>Nuevo Título</h2>
    <p>Nuevo párrafo con <strong>texto en negrita</strong></p>
    <button onclick="alert('¡Hola!')">Hacer clic</button>
`;

// Agregar HTML al existente
lista.innerHTML += '<li>Item 3 agregado</li>';

// Crear lista dinámica
const frutas = ['Manzana', 'Banana', 'Naranja'];
lista.innerHTML = frutas.map(fruta => `<li>${fruta}</li>`).join('');
```

### 3. outerHTML - Elemento Completo

La propiedad `outerHTML` incluye el elemento mismo, no solo su contenido.

```html
<div id="caja" class="destacada">
    <p>Contenido de la caja</p>
</div>
```

```javascript
const caja = document.getElementById('caja');

// Leer HTML externo (incluye el elemento)
console.log(caja.outerHTML);
// "<div id='caja' class='destacada'><p>Contenido de la caja</p></div>"

// Reemplazar el elemento completo
caja.outerHTML = '<section class="nueva-seccion"><h2>Nueva Sección</h2></section>';
```

### Ejemplo Práctico: Editor de Contenido

```html
<div id="editor">
    <h2 id="titulo">Título Original</h2>
    <p id="parrafo">Párrafo original</p>
    <div id="contenido-html"><em>Contenido con HTML</em></div>
</div>

<div class="controles">
    <input type="text" id="nuevoTitulo" placeholder="Nuevo título">
    <input type="text" id="nuevoParrafo" placeholder="Nuevo párrafo">
    <textarea id="nuevoHTML" placeholder="Nuevo HTML"></textarea>
    <button onclick="actualizarContenido()">Actualizar</button>
</div>
```

```javascript
function actualizarContenido() {
    const titulo = document.getElementById('titulo');
    const parrafo = document.getElementById('parrafo');
    const contenidoHTML = document.getElementById('contenido-html');
    
    const nuevoTitulo = document.getElementById('nuevoTitulo').value;
    const nuevoParrafo = document.getElementById('nuevoParrafo').value;
    const nuevoHTML = document.getElementById('nuevoHTML').value;
    
    // Actualizar solo si hay contenido nuevo
    if (nuevoTitulo) {
        titulo.textContent = nuevoTitulo;
    }
    
    if (nuevoParrafo) {
        parrafo.textContent = nuevoParrafo;
    }
    
    if (nuevoHTML) {
        contenidoHTML.innerHTML = nuevoHTML;
    }
    
    // Limpiar campos
    document.getElementById('nuevoTitulo').value = '';
    document.getElementById('nuevoParrafo').value = '';
    document.getElementById('nuevoHTML').value = '';
}
```

## Modificación de Atributos

### Métodos para Atributos

```html
<img id="imagen" src="imagen1.jpg" alt="Imagen original" class="pequeña">
<a id="enlace" href="#" target="_self">Enlace</a>
<input id="campo" type="text" placeholder="Escribe aquí" disabled>
```

```javascript
const imagen = document.getElementById('imagen');
const enlace = document.getElementById('enlace');
const campo = document.getElementById('campo');

// getAttribute() - Obtener atributo
console.log(imagen.getAttribute('src')); // "imagen1.jpg"
console.log(enlace.getAttribute('href')); // "#"

// setAttribute() - Establecer atributo
imagen.setAttribute('src', 'nueva-imagen.jpg');
imagen.setAttribute('alt', 'Nueva descripción');
enlace.setAttribute('href', 'https://ejemplo.com');
enlace.setAttribute('target', '_blank');

// removeAttribute() - Remover atributo
campo.removeAttribute('disabled');
imagen.removeAttribute('class');

// hasAttribute() - Verificar si existe atributo
if (enlace.hasAttribute('target')) {
    console.log('El enlace tiene atributo target');
}

// Acceso directo a propiedades comunes
imagen.src = 'otra-imagen.jpg';
imagen.alt = 'Otra descripción';
enlace.href = 'https://otro-sitio.com';
campo.placeholder = 'Nuevo placeholder';
```

### Atributos Booleanos

```html
<input id="checkbox" type="checkbox">
<button id="boton">Botón</button>
<input id="texto" type="text">
```

```javascript
const checkbox = document.getElementById('checkbox');
const boton = document.getElementById('boton');
const texto = document.getElementById('texto');

// Atributos booleanos (checked, disabled, hidden, etc.)
checkbox.checked = true; // Marcar checkbox
boton.disabled = true; // Deshabilitar botón
texto.hidden = true; // Ocultar elemento

// Alternar atributos booleanos
function alternarCheckbox() {
    checkbox.checked = !checkbox.checked;
}

function alternarBoton() {
    boton.disabled = !boton.disabled;
    boton.textContent = boton.disabled ? 'Deshabilitado' : 'Habilitado';
}
```

### Atributos de Datos (data-*)

```html
<div id="producto" 
     data-id="123" 
     data-precio="29.99" 
     data-categoria="electronica"
     data-disponible="true">
    Producto
</div>
```

```javascript
const producto = document.getElementById('producto');

// Acceder a atributos data con dataset
console.log(producto.dataset.id); // "123"
console.log(producto.dataset.precio); // "29.99"
console.log(producto.dataset.categoria); // "electronica"
console.log(producto.dataset.disponible); // "true"

// Modificar atributos data
producto.dataset.precio = '24.99';
producto.dataset.descuento = '15';
producto.dataset.disponible = 'false';

// Eliminar atributo data
delete producto.dataset.categoria;

// Iterar sobre todos los atributos data
for (let [clave, valor] of Object.entries(producto.dataset)) {
    console.log(`${clave}: ${valor}`);
}
```

## Modificación de Estilos CSS

### 1. Propiedad style - Estilos Inline

```html
<div id="caja">Caja para estilizar</div>
<p id="texto">Texto para modificar</p>
```

```javascript
const caja = document.getElementById('caja');
const texto = document.getElementById('texto');

// Modificar estilos individuales
caja.style.backgroundColor = 'lightblue';
caja.style.color = 'darkblue';
caja.style.padding = '20px';
caja.style.border = '2px solid blue';
caja.style.borderRadius = '10px';

// Propiedades con guiones se convierten a camelCase
caja.style.fontSize = '18px';
caja.style.fontWeight = 'bold';
caja.style.textAlign = 'center';

// Usar variables para valores
const colorPrimario = '#3498db';
const tamaño = '16px';

texto.style.color = colorPrimario;
texto.style.fontSize = tamaño;

// Leer estilos actuales
console.log(caja.style.backgroundColor); // "lightblue"
console.log(caja.style.padding); // "20px"
```

### 2. cssText - Múltiples Estilos

```javascript
// Establecer múltiples estilos de una vez
caja.style.cssText = `
    background-color: lightgreen;
    color: darkgreen;
    padding: 15px;
    margin: 10px;
    border: 1px solid green;
    border-radius: 5px;
    font-size: 16px;
`;

// Agregar estilos a los existentes
caja.style.cssText += 'box-shadow: 0 2px 4px rgba(0,0,0,0.1);';

// Leer todos los estilos
console.log(caja.style.cssText);
```

### 3. getComputedStyle() - Estilos Calculados

```css
/* CSS en el archivo de estilos */
.mi-clase {
    color: red;
    font-size: 14px;
    margin: 10px;
}
```

```html
<div id="elemento" class="mi-clase" style="color: blue;">Elemento</div>
```

```javascript
const elemento = document.getElementById('elemento');

// getComputedStyle devuelve los estilos finales calculados
const estilosCalculados = getComputedStyle(elemento);

console.log(estilosCalculados.color); // "rgb(0, 0, 255)" (azul del style inline)
console.log(estilosCalculados.fontSize); // "14px" (del CSS)
console.log(estilosCalculados.margin); // "10px" (del CSS)
console.log(estilosCalculados.display); // "block" (valor por defecto)

// Obtener propiedades específicas
const colorActual = getComputedStyle(elemento).getPropertyValue('color');
const fuenteActual = getComputedStyle(elemento).getPropertyValue('font-size');

console.log('Color actual:', colorActual);
console.log('Fuente actual:', fuenteActual);
```

### Ejemplo Práctico: Cambiador de Temas

```html
<div id="contenido">
    <h1>Mi Sitio Web</h1>
    <p>Este es el contenido principal</p>
    <button id="tema-claro">Tema Claro</button>
    <button id="tema-oscuro">Tema Oscuro</button>
    <button id="tema-colorido">Tema Colorido</button>
</div>
```

```javascript
function configurarCambiadorTemas() {
    const contenido = document.getElementById('contenido');
    const temaClaro = document.getElementById('tema-claro');
    const temaOscuro = document.getElementById('tema-oscuro');
    const temaColorido = document.getElementById('tema-colorido');
    
    function aplicarTemaClaro() {
        contenido.style.cssText = `
            background-color: white;
            color: black;
            padding: 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
        `;
    }
    
    function aplicarTemaOscuro() {
        contenido.style.cssText = `
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
        `;
    }
    
    function aplicarTemaColorido() {
        contenido.style.cssText = `
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        `;
    }
    
    temaClaro.addEventListener('click', aplicarTemaClaro);
    temaOscuro.addEventListener('click', aplicarTemaOscuro);
    temaColorido.addEventListener('click', aplicarTemaColorido);
    
    // Aplicar tema claro por defecto
    aplicarTemaClaro();
}

configurarCambiadorTemas();
```

## Modificación de Clases CSS

### classList - Gestión de Clases

```html
<div id="elemento" class="inicial activa">Elemento con clases</div>
```

```css
.inicial { background-color: lightgray; }
.activa { border: 2px solid blue; }
.destacada { background-color: yellow; }
.grande { font-size: 24px; }
.oculta { display: none; }
```

```javascript
const elemento = document.getElementById('elemento');

// Leer clases actuales
console.log(elemento.className); // "inicial activa"
console.log(elemento.classList); // DOMTokenList ["inicial", "activa"]

// add() - Agregar clase
elemento.classList.add('destacada');
elemento.classList.add('grande', 'nueva'); // Múltiples clases

// remove() - Remover clase
elemento.classList.remove('inicial');
elemento.classList.remove('activa', 'nueva'); // Múltiples clases

// toggle() - Alternar clase
elemento.classList.toggle('oculta'); // Agrega si no existe, remueve si existe
elemento.classList.toggle('destacada'); // Alterna

// contains() - Verificar si tiene clase
if (elemento.classList.contains('grande')) {
    console.log('El elemento tiene la clase grande');
}

// replace() - Reemplazar clase
elemento.classList.replace('destacada', 'importante');

// Iterar sobre las clases
elemento.classList.forEach(clase => {
    console.log('Clase:', clase);
});
```

### Ejemplo Práctico: Sistema de Estados

```html
<div id="tarjeta" class="tarjeta">
    <h3>Producto</h3>
    <p>Descripción del producto</p>
    <div class="controles">
        <button onclick="cambiarEstado('normal')">Normal</button>
        <button onclick="cambiarEstado('destacado')">Destacado</button>
        <button onclick="cambiarEstado('agotado')">Agotado</button>
        <button onclick="cambiarEstado('oferta')">En Oferta</button>
    </div>
</div>
```

```css
.tarjeta {
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.tarjeta.destacado {
    background-color: #fff3cd;
    border-color: #ffc107;
    transform: scale(1.05);
}

.tarjeta.agotado {
    background-color: #f8d7da;
    border-color: #dc3545;
    opacity: 0.7;
}

.tarjeta.oferta {
    background-color: #d1ecf1;
    border-color: #17a2b8;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
```

```javascript
function cambiarEstado(nuevoEstado) {
    const tarjeta = document.getElementById('tarjeta');
    
    // Remover todos los estados anteriores
    tarjeta.classList.remove('destacado', 'agotado', 'oferta');
    
    // Agregar nuevo estado si no es 'normal'
    if (nuevoEstado !== 'normal') {
        tarjeta.classList.add(nuevoEstado);
    }
    
    console.log(`Estado cambiado a: ${nuevoEstado}`);
    console.log('Clases actuales:', [...tarjeta.classList]);
}
```

## Creación y Eliminación de Elementos

### Crear Elementos

```javascript
// createElement() - Crear elemento
const nuevoDiv = document.createElement('div');
const nuevoParrafo = document.createElement('p');
const nuevoBoton = document.createElement('button');

// Configurar el elemento creado
nuevoDiv.id = 'contenedor-nuevo';
nuevoDiv.className = 'contenedor destacado';
nuevoDiv.textContent = 'Contenedor creado dinámicamente';

nuevoParrafo.textContent = 'Este párrafo fue creado con JavaScript';
nuevoParrafo.style.color = 'blue';

nuevoBoton.textContent = 'Botón Dinámico';
nuevoBoton.onclick = function() {
    alert('¡Botón dinámico clickeado!');
};

// appendChild() - Agregar al final
document.body.appendChild(nuevoDiv);
nuevoDiv.appendChild(nuevoParrafo);
nuevoDiv.appendChild(nuevoBoton);
```

### Insertar Elementos en Posiciones Específicas

```html
<ul id="lista">
    <li>Item 1</li>
    <li>Item 3</li>
</ul>
```

```javascript
const lista = document.getElementById('lista');

// Crear nuevo elemento
const nuevoItem = document.createElement('li');
nuevoItem.textContent = 'Item 2';

// insertBefore() - Insertar antes de un elemento específico
const tercerItem = lista.children[1]; // "Item 3"
lista.insertBefore(nuevoItem, tercerItem);

// insertAdjacentElement() - Insertar en posición relativa
const otroItem = document.createElement('li');
otroItem.textContent = 'Item al inicio';
lista.insertAdjacentElement('afterbegin', otroItem);

const itemFinal = document.createElement('li');
itemFinal.textContent = 'Item al final';
lista.insertAdjacentElement('beforeend', itemFinal);

// insertAdjacentHTML() - Insertar HTML
lista.insertAdjacentHTML('afterbegin', '<li>HTML insertado</li>');
```

### Eliminar Elementos

```html
<div id="contenedor">
    <p id="parrafo1">Párrafo 1</p>
    <p id="parrafo2">Párrafo 2</p>
    <p id="parrafo3">Párrafo 3</p>
</div>
```

```javascript
const contenedor = document.getElementById('contenedor');
const parrafo2 = document.getElementById('parrafo2');

// remove() - Eliminar el elemento (método moderno)
parrafo2.remove();

// removeChild() - Eliminar hijo específico (método clásico)
const parrafo1 = document.getElementById('parrafo1');
contenedor.removeChild(parrafo1);

// Eliminar todos los hijos
while (contenedor.firstChild) {
    contenedor.removeChild(contenedor.firstChild);
}

// O más simple con innerHTML
// contenedor.innerHTML = '';
```

### Ejemplo Práctico: Lista de Tareas Dinámica

```html
<div id="app-tareas">
    <h2>Lista de Tareas</h2>
    <div class="agregar-tarea">
        <input type="text" id="nueva-tarea" placeholder="Nueva tarea...">
        <button onclick="agregarTarea()">Agregar</button>
    </div>
    <ul id="lista-tareas"></ul>
</div>
```

```javascript
let contadorTareas = 0;

function agregarTarea() {
    const input = document.getElementById('nueva-tarea');
    const lista = document.getElementById('lista-tareas');
    const textoTarea = input.value.trim();
    
    if (!textoTarea) {
        alert('Por favor, escribe una tarea');
        return;
    }
    
    // Crear elementos
    const li = document.createElement('li');
    const span = document.createElement('span');
    const botonCompletar = document.createElement('button');
    const botonEliminar = document.createElement('button');
    
    // Configurar elementos
    contadorTareas++;
    li.id = `tarea-${contadorTareas}`;
    li.className = 'tarea';
    
    span.textContent = textoTarea;
    span.className = 'texto-tarea';
    
    botonCompletar.textContent = '✓';
    botonCompletar.className = 'btn-completar';
    botonCompletar.onclick = function() {
        completarTarea(li);
    };
    
    botonEliminar.textContent = '✗';
    botonEliminar.className = 'btn-eliminar';
    botonEliminar.onclick = function() {
        eliminarTarea(li);
    };
    
    // Ensamblar y agregar
    li.appendChild(span);
    li.appendChild(botonCompletar);
    li.appendChild(botonEliminar);
    lista.appendChild(li);
    
    // Limpiar input
    input.value = '';
    input.focus();
}

function completarTarea(elementoTarea) {
    elementoTarea.classList.toggle('completada');
    const span = elementoTarea.querySelector('.texto-tarea');
    
    if (elementoTarea.classList.contains('completada')) {
        span.style.textDecoration = 'line-through';
        span.style.opacity = '0.6';
    } else {
        span.style.textDecoration = 'none';
        span.style.opacity = '1';
    }
}

function eliminarTarea(elementoTarea) {
    if (confirm('¿Estás seguro de eliminar esta tarea?')) {
        elementoTarea.remove();
    }
}

// Permitir agregar tarea con Enter
document.getElementById('nueva-tarea').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        agregarTarea();
    }
});
```

## Ejercicios Prácticos

### Ejercicio 1: Editor de Perfil

```html
<div id="perfil">
    <img id="avatar" src="avatar-default.jpg" alt="Avatar">
    <h2 id="nombre">Nombre Usuario</h2>
    <p id="bio">Biografía del usuario</p>
    <div class="controles">
        <input type="text" id="nuevo-nombre" placeholder="Nuevo nombre">
        <textarea id="nueva-bio" placeholder="Nueva biografía"></textarea>
        <input type="url" id="nuevo-avatar" placeholder="URL del avatar">
        <button onclick="actualizarPerfil()">Actualizar</button>
    </div>
</div>
```

```javascript
function actualizarPerfil() {
    const nombre = document.getElementById('nombre');
    const bio = document.getElementById('bio');
    const avatar = document.getElementById('avatar');
    
    const nuevoNombre = document.getElementById('nuevo-nombre').value;
    const nuevaBio = document.getElementById('nueva-bio').value;
    const nuevoAvatar = document.getElementById('nuevo-avatar').value;
    
    if (nuevoNombre) {
        nombre.textContent = nuevoNombre;
        document.getElementById('nuevo-nombre').value = '';
    }
    
    if (nuevaBio) {
        bio.textContent = nuevaBio;
        document.getElementById('nueva-bio').value = '';
    }
    
    if (nuevoAvatar) {
        avatar.src = nuevoAvatar;
        document.getElementById('nuevo-avatar').value = '';
    }
}
```

### Ejercicio 2: Generador de Tarjetas

```javascript
function crearTarjeta(titulo, descripcion, imagen, enlace) {
    // Crear elementos
    const tarjeta = document.createElement('div');
    const img = document.createElement('img');
    const contenido = document.createElement('div');
    const h3 = document.createElement('h3');
    const p = document.createElement('p');
    const a = document.createElement('a');
    
    // Configurar elementos
    tarjeta.className = 'tarjeta';
    img.src = imagen;
    img.alt = titulo;
    contenido.className = 'contenido-tarjeta';
    h3.textContent = titulo;
    p.textContent = descripcion;
    a.href = enlace;
    a.textContent = 'Leer más';
    a.target = '_blank';
    
    // Ensamblar
    contenido.appendChild(h3);
    contenido.appendChild(p);
    contenido.appendChild(a);
    tarjeta.appendChild(img);
    tarjeta.appendChild(contenido);
    
    return tarjeta;
}

// Usar el generador
const contenedor = document.getElementById('contenedor-tarjetas');
const tarjeta1 = crearTarjeta(
    'JavaScript Básico',
    'Aprende los fundamentos de JavaScript',
    'js-logo.jpg',
    'https://ejemplo.com/js'
);
contenedor.appendChild(tarjeta1);
```

### Ejercicio 3: Calculadora de Estilos

```javascript
function aplicarEstilosPersonalizados() {
    const elemento = document.getElementById('elemento-prueba');
    
    // Obtener valores de los controles
    const color = document.getElementById('color').value;
    const fondo = document.getElementById('fondo').value;
    const tamaño = document.getElementById('tamaño').value;
    const padding = document.getElementById('padding').value;
    const borde = document.getElementById('borde').value;
    
    // Aplicar estilos
    elemento.style.color = color;
    elemento.style.backgroundColor = fondo;
    elemento.style.fontSize = tamaño + 'px';
    elemento.style.padding = padding + 'px';
    elemento.style.border = borde + 'px solid black';
    elemento.style.borderRadius = '5px';
    elemento.style.transition = 'all 0.3s ease';
    
    // Mostrar CSS generado
    const cssGenerado = `
        color: ${color};
        background-color: ${fondo};
        font-size: ${tamaño}px;
        padding: ${padding}px;
        border: ${borde}px solid black;
        border-radius: 5px;
        transition: all 0.3s ease;
    `;
    
    document.getElementById('css-output').textContent = cssGenerado;
}
```

## Mejores Prácticas

### 1. Seguridad con innerHTML

```javascript
// ❌ Peligroso: puede ejecutar scripts maliciosos
const userInput = '<script>alert("XSS Attack!")</script>';
element.innerHTML = userInput;

// ✅ Seguro: usar textContent para texto plano
element.textContent = userInput;

// ✅ Seguro: sanitizar HTML si es necesario
function sanitizeHTML(str) {
    const temp = document.createElement('div');
    temp.textContent = str;
    return temp.innerHTML;
}
```

### 2. Rendimiento con Modificaciones Masivas

```javascript
// ❌ Ineficiente: múltiples reflows
for (let i = 0; i < 1000; i++) {
    const div = document.createElement('div');
    div.textContent = `Item ${i}`;
    document.body.appendChild(div);
}

// ✅ Eficiente: usar DocumentFragment
const fragment = document.createDocumentFragment();
for (let i = 0; i < 1000; i++) {
    const div = document.createElement('div');
    div.textContent = `Item ${i}`;
    fragment.appendChild(div);
}
document.body.appendChild(fragment);

// ✅ Alternativa: construir HTML y usar innerHTML una vez
let html = '';
for (let i = 0; i < 1000; i++) {
    html += `<div>Item ${i}</div>`;
}
document.getElementById('contenedor').innerHTML = html;
```

### 3. Verificación de Elementos

```javascript
// ✅ Siempre verificar que el elemento existe
function modificarElemento(id, nuevoTexto) {
    const elemento = document.getElementById(id);
    if (elemento) {
        elemento.textContent = nuevoTexto;
    } else {
        console.warn(`Elemento con ID '${id}' no encontrado`);
    }
}
```

## Resumen

En esta semana hemos aprendido a modificar elementos del DOM:

1. **Contenido**: `textContent`, `innerHTML`, `outerHTML`
2. **Atributos**: `getAttribute()`, `setAttribute()`, `removeAttribute()`, `dataset`
3. **Estilos**: `style`, `cssText`, `getComputedStyle()`
4. **Clases**: `classList` con `add()`, `remove()`, `toggle()`, `contains()`
5. **Estructura**: `createElement()`, `appendChild()`, `remove()`, `insertBefore()`
6. **Mejores prácticas**: Seguridad, rendimiento y verificación

Con estos conocimientos puedes crear páginas web completamente dinámicas e interactivas. La manipulación del DOM es una de las habilidades más importantes en el desarrollo web frontend.

!!! tip "Consejo"
    Practica creando pequeños proyectos como listas de tareas, calculadoras o galerías de imágenes. ¡La práctica hace al maestro!

## Ejercicios para Resolver

A continuación encontrarás 5 ejercicios prácticos que combinan la modificación del DOM con cálculos básicos. Cada ejercicio utiliza inputs para recibir datos del usuario y buttons para ejecutar las operaciones.

### Ejercicio 1: Calculadora Básica

Crea una calculadora que realice las cuatro operaciones básicas (suma, resta, multiplicación y división).

**Requisitos:**
- Dos campos de entrada para los números
- Cuatro botones para las operaciones
- Un área para mostrar el resultado
- Validación de entrada (números válidos)
- Manejo de división por cero

```html
<div id="calculadora-basica">
    <h3>🧮 Calculadora Básica</h3>
    <div class="inputs">
        <input type="number" id="num1" placeholder="Primer número" step="any">
        <input type="number" id="num2" placeholder="Segundo número" step="any">
    </div>
    <div class="botones">
        <button onclick="calcular('suma')">➕ Sumar</button>
        <button onclick="calcular('resta')">➖ Restar</button>
        <button onclick="calcular('multiplicacion')">✖️ Multiplicar</button>
        <button onclick="calcular('division')">➗ Dividir</button>
    </div>
    <div id="resultado-calc" class="resultado"></div>
    <button onclick="limpiarCalculadora()">🗑️ Limpiar</button>
</div>
```

```javascript
function calcular(operacion) {
    const num1 = parseFloat(document.getElementById('num1').value);
    const num2 = parseFloat(document.getElementById('num2').value);
    const resultado = document.getElementById('resultado-calc');
    
    // Validar que los números sean válidos
    if (isNaN(num1) || isNaN(num2)) {
        resultado.innerHTML = '<span style="color: red;">❌ Por favor, ingresa números válidos</span>';
        return;
    }
    
    let operacionTexto = '';
    let resultadoCalculo = 0;
    
    switch(operacion) {
        case 'suma':
            resultadoCalculo = num1 + num2;
            operacionTexto = `${num1} + ${num2}`;
            break;
        case 'resta':
            resultadoCalculo = num1 - num2;
            operacionTexto = `${num1} - ${num2}`;
            break;
        case 'multiplicacion':
            resultadoCalculo = num1 * num2;
            operacionTexto = `${num1} × ${num2}`;
            break;
        case 'division':
            if (num2 === 0) {
                resultado.innerHTML = '<span style="color: red;">❌ No se puede dividir por cero</span>';
                return;
            }
            resultadoCalculo = num1 / num2;
            operacionTexto = `${num1} ÷ ${num2}`;
            break;
    }
    
    resultado.innerHTML = `
        <div style="color: green;">
            <strong>✅ ${operacionTexto} = ${resultadoCalculo.toFixed(2)}</strong>
        </div>
    `;
}

function limpiarCalculadora() {
    document.getElementById('num1').value = '';
    document.getElementById('num2').value = '';
    document.getElementById('resultado-calc').innerHTML = '';
}
```

### Ejercicio 2: Calculadora de Área y Perímetro

Desarrolla una calculadora que calcule el área y perímetro de diferentes figuras geométricas.

**Requisitos:**
- Selector para elegir la figura (cuadrado, rectángulo, círculo, triángulo)
- Campos de entrada dinámicos según la figura seleccionada
- Botones para calcular área y perímetro
- Mostrar fórmulas utilizadas
- Resultados con unidades

```html
<div id="calculadora-geometria">
    <h3>📐 Calculadora de Geometría</h3>
    <div class="selector-figura">
        <label for="figura">Selecciona una figura:</label>
        <select id="figura" onchange="cambiarFigura()">
            <option value="">-- Selecciona --</option>
            <option value="cuadrado">🟦 Cuadrado</option>
            <option value="rectangulo">🟨 Rectángulo</option>
            <option value="circulo">🟡 Círculo</option>
            <option value="triangulo">🔺 Triángulo</option>
        </select>
    </div>
    
    <div id="inputs-figura" class="inputs-dinamicos"></div>
    
    <div class="botones" id="botones-geometria" style="display: none;">
        <button onclick="calcularArea()">📏 Calcular Área</button>
        <button onclick="calcularPerimetro()">📐 Calcular Perímetro</button>
        <button onclick="calcularAmbos()">🔢 Calcular Ambos</button>
    </div>
    
    <div id="resultado-geometria" class="resultado"></div>
    <div id="formulas" class="formulas"></div>
</div>
```

```javascript
function cambiarFigura() {
    const figura = document.getElementById('figura').value;
    const inputsContainer = document.getElementById('inputs-figura');
    const botones = document.getElementById('botones-geometria');
    const resultado = document.getElementById('resultado-geometria');
    const formulas = document.getElementById('formulas');
    
    // Limpiar contenido anterior
    inputsContainer.innerHTML = '';
    resultado.innerHTML = '';
    formulas.innerHTML = '';
    
    if (!figura) {
        botones.style.display = 'none';
        return;
    }
    
    botones.style.display = 'block';
    
    switch(figura) {
        case 'cuadrado':
            inputsContainer.innerHTML = `
                <input type="number" id="lado" placeholder="Lado (cm)" step="any" min="0">
            `;
            formulas.innerHTML = `
                <small><strong>Fórmulas:</strong> Área = lado², Perímetro = 4 × lado</small>
            `;
            break;
        case 'rectangulo':
            inputsContainer.innerHTML = `
                <input type="number" id="largo" placeholder="Largo (cm)" step="any" min="0">
                <input type="number" id="ancho" placeholder="Ancho (cm)" step="any" min="0">
            `;
            formulas.innerHTML = `
                <small><strong>Fórmulas:</strong> Área = largo × ancho, Perímetro = 2 × (largo + ancho)</small>
            `;
            break;
        case 'circulo':
            inputsContainer.innerHTML = `
                <input type="number" id="radio" placeholder="Radio (cm)" step="any" min="0">
            `;
            formulas.innerHTML = `
                <small><strong>Fórmulas:</strong> Área = π × radio², Perímetro = 2 × π × radio</small>
            `;
            break;
        case 'triangulo':
            inputsContainer.innerHTML = `
                <input type="number" id="base" placeholder="Base (cm)" step="any" min="0">
                <input type="number" id="altura" placeholder="Altura (cm)" step="any" min="0">
                <input type="number" id="lado1" placeholder="Lado 1 (cm)" step="any" min="0">
                <input type="number" id="lado2" placeholder="Lado 2 (cm)" step="any" min="0">
                <input type="number" id="lado3" placeholder="Lado 3 (cm)" step="any" min="0">
            `;
            formulas.innerHTML = `
                <small><strong>Fórmulas:</strong> Área = (base × altura) ÷ 2, Perímetro = lado1 + lado2 + lado3</small>
            `;
            break;
    }
}

function calcularArea() {
    const figura = document.getElementById('figura').value;
    const resultado = document.getElementById('resultado-geometria');
    let area = 0;
    let valido = true;
    
    switch(figura) {
        case 'cuadrado':
            const lado = parseFloat(document.getElementById('lado').value);
            if (isNaN(lado) || lado <= 0) {
                valido = false;
            } else {
                area = lado * lado;
            }
            break;
        case 'rectangulo':
            const largo = parseFloat(document.getElementById('largo').value);
            const ancho = parseFloat(document.getElementById('ancho').value);
            if (isNaN(largo) || isNaN(ancho) || largo <= 0 || ancho <= 0) {
                valido = false;
            } else {
                area = largo * ancho;
            }
            break;
        case 'circulo':
            const radio = parseFloat(document.getElementById('radio').value);
            if (isNaN(radio) || radio <= 0) {
                valido = false;
            } else {
                area = Math.PI * radio * radio;
            }
            break;
        case 'triangulo':
            const base = parseFloat(document.getElementById('base').value);
            const altura = parseFloat(document.getElementById('altura').value);
            if (isNaN(base) || isNaN(altura) || base <= 0 || altura <= 0) {
                valido = false;
            } else {
                area = (base * altura) / 2;
            }
            break;
    }
    
    if (!valido) {
        resultado.innerHTML = '<span style="color: red;">❌ Por favor, ingresa valores válidos y positivos</span>';
    } else {
        resultado.innerHTML = `<div style="color: blue;"><strong>📏 Área: ${area.toFixed(2)} cm²</strong></div>`;
    }
}

function calcularPerimetro() {
    const figura = document.getElementById('figura').value;
    const resultado = document.getElementById('resultado-geometria');
    let perimetro = 0;
    let valido = true;
    
    switch(figura) {
        case 'cuadrado':
            const lado = parseFloat(document.getElementById('lado').value);
            if (isNaN(lado) || lado <= 0) {
                valido = false;
            } else {
                perimetro = 4 * lado;
            }
            break;
        case 'rectangulo':
            const largo = parseFloat(document.getElementById('largo').value);
            const ancho = parseFloat(document.getElementById('ancho').value);
            if (isNaN(largo) || isNaN(ancho) || largo <= 0 || ancho <= 0) {
                valido = false;
            } else {
                perimetro = 2 * (largo + ancho);
            }
            break;
        case 'circulo':
            const radio = parseFloat(document.getElementById('radio').value);
            if (isNaN(radio) || radio <= 0) {
                valido = false;
            } else {
                perimetro = 2 * Math.PI * radio;
            }
            break;
        case 'triangulo':
            const lado1 = parseFloat(document.getElementById('lado1').value);
            const lado2 = parseFloat(document.getElementById('lado2').value);
            const lado3 = parseFloat(document.getElementById('lado3').value);
            if (isNaN(lado1) || isNaN(lado2) || isNaN(lado3) || lado1 <= 0 || lado2 <= 0 || lado3 <= 0) {
                valido = false;
            } else {
                perimetro = lado1 + lado2 + lado3;
            }
            break;
    }
    
    if (!valido) {
        resultado.innerHTML = '<span style="color: red;">❌ Por favor, ingresa valores válidos y positivos</span>';
    } else {
        resultado.innerHTML = `<div style="color: green;"><strong>📐 Perímetro: ${perimetro.toFixed(2)} cm</strong></div>`;
    }
}

function calcularAmbos() {
    calcularArea();
    setTimeout(() => {
        const resultadoActual = document.getElementById('resultado-geometria').innerHTML;
        calcularPerimetro();
        const resultadoPerimetro = document.getElementById('resultado-geometria').innerHTML;
        document.getElementById('resultado-geometria').innerHTML = resultadoActual + '<br>' + resultadoPerimetro;
    }, 100);
}
```

### Ejercicio 3: Conversor de Unidades

Crea un conversor que transforme entre diferentes unidades de medida.

**Requisitos:**
- Selector de tipo de conversión (temperatura, peso, longitud)
- Campos para unidad origen y destino
- Conversión bidireccional
- Historial de conversiones
- Validación de datos

```html
<div id="conversor-unidades">
    <h3>🔄 Conversor de Unidades</h3>
    <div class="selector-tipo">
        <label for="tipo-conversion">Tipo de conversión:</label>
        <select id="tipo-conversion" onchange="cambiarTipoConversion()">
            <option value="">-- Selecciona --</option>
            <option value="temperatura">🌡️ Temperatura</option>
            <option value="peso">⚖️ Peso</option>
            <option value="longitud">📏 Longitud</option>
        </select>
    </div>
    
    <div id="conversion-container" style="display: none;">
        <div class="conversion-inputs">
            <div class="input-group">
                <input type="number" id="valor-origen" placeholder="Valor a convertir" step="any">
                <select id="unidad-origen"></select>
            </div>
            <div class="conversion-arrow">➡️</div>
            <div class="input-group">
                <input type="number" id="valor-destino" placeholder="Resultado" readonly>
                <select id="unidad-destino"></select>
            </div>
        </div>
        
        <div class="botones">
            <button onclick="convertir()">🔄 Convertir</button>
            <button onclick="intercambiarUnidades()">🔀 Intercambiar</button>
            <button onclick="limpiarConversor()">🗑️ Limpiar</button>
        </div>
    </div>
    
    <div id="resultado-conversion" class="resultado"></div>
    <div id="historial-conversiones" class="historial"></div>
</div>
```

```javascript
const unidades = {
    temperatura: {
        'celsius': '°C',
        'fahrenheit': '°F',
        'kelvin': 'K'
    },
    peso: {
        'gramos': 'g',
        'kilogramos': 'kg',
        'libras': 'lb',
        'onzas': 'oz'
    },
    longitud: {
        'metros': 'm',
        'centimetros': 'cm',
        'kilometros': 'km',
        'pies': 'ft',
        'pulgadas': 'in'
    }
};

let historialConversiones = [];

function cambiarTipoConversion() {
    const tipo = document.getElementById('tipo-conversion').value;
    const container = document.getElementById('conversion-container');
    const unidadOrigen = document.getElementById('unidad-origen');
    const unidadDestino = document.getElementById('unidad-destino');
    
    if (!tipo) {
        container.style.display = 'none';
        return;
    }
    
    container.style.display = 'block';
    
    // Limpiar y llenar selectores de unidades
    unidadOrigen.innerHTML = '';
    unidadDestino.innerHTML = '';
    
    for (let unidad in unidades[tipo]) {
        const option1 = new Option(`${unidad} (${unidades[tipo][unidad]})`, unidad);
        const option2 = new Option(`${unidad} (${unidades[tipo][unidad]})`, unidad);
        unidadOrigen.add(option1);
        unidadDestino.add(option2);
    }
    
    // Seleccionar diferentes unidades por defecto
    if (unidadDestino.options.length > 1) {
        unidadDestino.selectedIndex = 1;
    }
    
    limpiarConversor();
}

function convertir() {
    const tipo = document.getElementById('tipo-conversion').value;
    const valor = parseFloat(document.getElementById('valor-origen').value);
    const unidadOrigen = document.getElementById('unidad-origen').value;
    const unidadDestino = document.getElementById('unidad-destino').value;
    const resultado = document.getElementById('resultado-conversion');
    
    if (isNaN(valor)) {
        resultado.innerHTML = '<span style="color: red;">❌ Por favor, ingresa un valor numérico válido</span>';
        return;
    }
    
    let valorConvertido = 0;
    
    switch(tipo) {
        case 'temperatura':
            valorConvertido = convertirTemperatura(valor, unidadOrigen, unidadDestino);
            break;
        case 'peso':
            valorConvertido = convertirPeso(valor, unidadOrigen, unidadDestino);
            break;
        case 'longitud':
            valorConvertido = convertirLongitud(valor, unidadOrigen, unidadDestino);
            break;
    }
    
    document.getElementById('valor-destino').value = valorConvertido.toFixed(4);
    
    const conversion = `${valor} ${unidades[tipo][unidadOrigen]} = ${valorConvertido.toFixed(4)} ${unidades[tipo][unidadDestino]}`;
    resultado.innerHTML = `<div style="color: green;"><strong>✅ ${conversion}</strong></div>`;
    
    // Agregar al historial
    historialConversiones.unshift(conversion);
    if (historialConversiones.length > 5) {
        historialConversiones.pop();
    }
    actualizarHistorial();
}

function convertirTemperatura(valor, origen, destino) {
    // Convertir todo a Celsius primero
    let celsius = valor;
    if (origen === 'fahrenheit') {
        celsius = (valor - 32) * 5/9;
    } else if (origen === 'kelvin') {
        celsius = valor - 273.15;
    }
    
    // Convertir de Celsius al destino
    if (destino === 'fahrenheit') {
        return celsius * 9/5 + 32;
    } else if (destino === 'kelvin') {
        return celsius + 273.15;
    }
    return celsius;
}

function convertirPeso(valor, origen, destino) {
    // Convertir todo a gramos primero
    let gramos = valor;
    switch(origen) {
        case 'kilogramos': gramos = valor * 1000; break;
        case 'libras': gramos = valor * 453.592; break;
        case 'onzas': gramos = valor * 28.3495; break;
    }
    
    // Convertir de gramos al destino
    switch(destino) {
        case 'kilogramos': return gramos / 1000;
        case 'libras': return gramos / 453.592;
        case 'onzas': return gramos / 28.3495;
        default: return gramos;
    }
}

function convertirLongitud(valor, origen, destino) {
    // Convertir todo a metros primero
    let metros = valor;
    switch(origen) {
        case 'centimetros': metros = valor / 100; break;
        case 'kilometros': metros = valor * 1000; break;
        case 'pies': metros = valor * 0.3048; break;
        case 'pulgadas': metros = valor * 0.0254; break;
    }
    
    // Convertir de metros al destino
    switch(destino) {
        case 'centimetros': return metros * 100;
        case 'kilometros': return metros / 1000;
        case 'pies': return metros / 0.3048;
        case 'pulgadas': return metros / 0.0254;
        default: return metros;
    }
}

function intercambiarUnidades() {
    const unidadOrigen = document.getElementById('unidad-origen');
    const unidadDestino = document.getElementById('unidad-destino');
    const valorOrigen = document.getElementById('valor-origen');
    const valorDestino = document.getElementById('valor-destino');
    
    // Intercambiar unidades
    const tempUnidad = unidadOrigen.value;
    unidadOrigen.value = unidadDestino.value;
    unidadDestino.value = tempUnidad;
    
    // Intercambiar valores
    const tempValor = valorOrigen.value;
    valorOrigen.value = valorDestino.value;
    valorDestino.value = tempValor;
    
    if (valorOrigen.value) {
        convertir();
    }
}

function limpiarConversor() {
    document.getElementById('valor-origen').value = '';
    document.getElementById('valor-destino').value = '';
    document.getElementById('resultado-conversion').innerHTML = '';
}

function actualizarHistorial() {
    const historial = document.getElementById('historial-conversiones');
    if (historialConversiones.length === 0) {
        historial.innerHTML = '';
        return;
    }
    
    historial.innerHTML = `
        <h4>📋 Historial de Conversiones</h4>
        <ul>
            ${historialConversiones.map(conversion => `<li>${conversion}</li>`).join('')}
        </ul>
    `;
}
```

### Ejercicio 4: Calculadora de Propinas y División de Cuentas

Desarrolla una calculadora para restaurantes que calcule propinas y divida cuentas entre varias personas.

**Requisitos:**
- Campo para el total de la cuenta
- Selector de porcentaje de propina o campo personalizado
- Número de personas para dividir
- Cálculo de propina total y por persona
- Resumen detallado de la cuenta

```html
<div id="calculadora-propinas">
    <h3>🍽️ Calculadora de Propinas</h3>
    
    <div class="input-cuenta">
        <label for="total-cuenta">💰 Total de la cuenta:</label>
        <input type="number" id="total-cuenta" placeholder="0.00" step="0.01" min="0">
        <span>$</span>
    </div>
    
    <div class="propina-section">
        <label>🎯 Porcentaje de propina:</label>
        <div class="propina-botones">
            <button onclick="seleccionarPropina(10)" class="btn-propina">10%</button>
            <button onclick="seleccionarPropina(15)" class="btn-propina">15%</button>
            <button onclick="seleccionarPropina(18)" class="btn-propina">18%</button>
            <button onclick="seleccionarPropina(20)" class="btn-propina">20%</button>
            <button onclick="seleccionarPropina(25)" class="btn-propina">25%</button>
        </div>
        <div class="propina-personalizada">
            <label for="propina-custom">O ingresa un porcentaje personalizado:</label>
            <input type="number" id="propina-custom" placeholder="%" step="0.1" min="0" max="100">
        </div>
    </div>
    
    <div class="personas-section">
        <label for="num-personas">👥 Número de personas:</label>
        <input type="number" id="num-personas" value="1" min="1" max="50">
    </div>
    
    <div class="botones">
        <button onclick="calcularPropina()">🧮 Calcular</button>
        <button onclick="limpiarPropinas()">🗑️ Limpiar</button>
    </div>
    
    <div id="resultado-propinas" class="resultado-detallado"></div>
</div>
```

```javascript
let propinaSeleccionada = 15; // Propina por defecto

function seleccionarPropina(porcentaje) {
    propinaSeleccionada = porcentaje;
    document.getElementById('propina-custom').value = '';
    
    // Actualizar estilos de botones
    const botones = document.querySelectorAll('.btn-propina');
    botones.forEach(btn => btn.classList.remove('activo'));
    event.target.classList.add('activo');
    
    // Calcular automáticamente si hay datos
    const totalCuenta = document.getElementById('total-cuenta').value;
    if (totalCuenta) {
        calcularPropina();
    }
}

function calcularPropina() {
    const totalCuenta = parseFloat(document.getElementById('total-cuenta').value);
    const propinaCustom = parseFloat(document.getElementById('propina-custom').value);
    const numPersonas = parseInt(document.getElementById('num-personas').value);
    const resultado = document.getElementById('resultado-propinas');
    
    // Validaciones
    if (isNaN(totalCuenta) || totalCuenta <= 0) {
        resultado.innerHTML = '<span style="color: red;">❌ Por favor, ingresa un total de cuenta válido</span>';
        return;
    }
    
    if (isNaN(numPersonas) || numPersonas < 1) {
        resultado.innerHTML = '<span style="color: red;">❌ El número de personas debe ser al menos 1</span>';
        return;
    }
    
    // Determinar porcentaje de propina
    let porcentajePropina = propinaSeleccionada;
    if (!isNaN(propinaCustom) && propinaCustom >= 0) {
        porcentajePropina = propinaCustom;
    }
    
    // Cálculos
    const montoPropinaTotal = totalCuenta * (porcentajePropina / 100);
    const totalConPropina = totalCuenta + montoPropinaTotal;
    const cuentaPorPersona = totalCuenta / numPersonas;
    const propinaPorPersona = montoPropinaTotal / numPersonas;
    const totalPorPersona = totalConPropina / numPersonas;
    
    // Mostrar resultados
    resultado.innerHTML = `
        <div class="resumen-cuenta">
            <h4>📊 Resumen de la Cuenta</h4>
            <div class="linea-resumen">
                <span>Subtotal:</span>
                <span>$${totalCuenta.toFixed(2)}</span>
            </div>
            <div class="linea-resumen">
                <span>Propina (${porcentajePropina}%):</span>
                <span>$${montoPropinaTotal.toFixed(2)}</span>
            </div>
            <div class="linea-resumen total">
                <span><strong>Total:</strong></span>
                <span><strong>$${totalConPropina.toFixed(2)}</strong></span>
            </div>
            
            <hr>
            
            <h4>👥 División entre ${numPersonas} persona${numPersonas > 1 ? 's' : ''}</h4>
            <div class="linea-resumen">
                <span>Cuenta por persona:</span>
                <span>$${cuentaPorPersona.toFixed(2)}</span>
            </div>
            <div class="linea-resumen">
                <span>Propina por persona:</span>
                <span>$${propinaPorPersona.toFixed(2)}</span>
            </div>
            <div class="linea-resumen total">
                <span><strong>Total por persona:</strong></span>
                <span><strong>$${totalPorPersona.toFixed(2)}</strong></span>
            </div>
            
            <div class="consejo-propina">
                ${obtenerConsejoServicio(porcentajePropina)}
            </div>
        </div>
    `;
}

function obtenerConsejoServicio(porcentaje) {
    if (porcentaje < 10) {
        return '<div style="color: #e74c3c;">🤔 Propina baja - ¿Hubo algún problema con el servicio?</div>';
    } else if (porcentaje >= 10 && porcentaje < 15) {
        return '<div style="color: #f39c12;">😐 Propina estándar - Servicio básico</div>';
    } else if (porcentaje >= 15 && porcentaje < 20) {
        return '<div style="color: #27ae60;">😊 Buena propina - Servicio satisfactorio</div>';
    } else if (porcentaje >= 20 && porcentaje < 25) {
        return '<div style="color: #2ecc71;">😄 Excelente propina - Muy buen servicio</div>';
    } else {
        return '<div style="color: #9b59b6;">🌟 Propina excepcional - Servicio extraordinario</div>';
    }
}

function limpiarPropinas() {
    document.getElementById('total-cuenta').value = '';
    document.getElementById('propina-custom').value = '';
    document.getElementById('num-personas').value = '1';
    document.getElementById('resultado-propinas').innerHTML = '';
    
    // Limpiar selección de botones
    const botones = document.querySelectorAll('.btn-propina');
    botones.forEach(btn => btn.classList.remove('activo'));
    
    propinaSeleccionada = 15;
}

// Event listeners para cálculo automático
document.getElementById('total-cuenta').addEventListener('input', function() {
    if (this.value) calcularPropina();
});

document.getElementById('propina-custom').addEventListener('input', function() {
    if (this.value && document.getElementById('total-cuenta').value) {
        calcularPropina();
    }
});

document.getElementById('num-personas').addEventListener('input', function() {
    if (document.getElementById('total-cuenta').value) {
        calcularPropina();
    }
});
```

### Ejercicio 5: Sistema de Puntuación y Estadísticas

Crea un sistema que registre puntuaciones de juegos o exámenes y calcule estadísticas.

**Requisitos:**
- Agregar puntuaciones individuales
- Calcular promedio, máximo, mínimo
- Mostrar distribución de calificaciones
- Historial de puntuaciones
- Exportar estadísticas

```html
<div id="sistema-puntuaciones">
    <h3>🎯 Sistema de Puntuaciones</h3>
    
    <div class="agregar-puntuacion">
        <div class="input-group">
            <input type="text" id="nombre-estudiante" placeholder="Nombre del estudiante">
            <input type="number" id="puntuacion" placeholder="Puntuación" min="0" max="100" step="0.1">
            <button onclick="agregarPuntuacion()">➕ Agregar</button>
        </div>
    </div>
    
    <div class="controles">
        <button onclick="calcularEstadisticas()">📊 Calcular Estadísticas</button>
        <button onclick="mostrarDistribucion()">📈 Ver Distribución</button>
        <button onclick="exportarDatos()">💾 Exportar</button>
        <button onclick="limpiarTodo()">🗑️ Limpiar Todo</button>
    </div>
    
    <div id="lista-puntuaciones" class="lista-puntuaciones"></div>
    <div id="estadisticas" class="estadisticas"></div>
    <div id="distribucion" class="distribucion"></div>
</div>
```

```javascript
let puntuaciones = [];
let contadorId = 0;

function agregarPuntuacion() {
    const nombre = document.getElementById('nombre-estudiante').value.trim();
    const puntuacion = parseFloat(document.getElementById('puntuacion').value);
    
    // Validaciones
    if (!nombre) {
        alert('❌ Por favor, ingresa el nombre del estudiante');
        return;
    }
    
    if (isNaN(puntuacion) || puntuacion < 0 || puntuacion > 100) {
        alert('❌ La puntuación debe ser un número entre 0 y 100');
        return;
    }
    
    // Agregar puntuación
    const nuevaPuntuacion = {
        id: ++contadorId,
        nombre: nombre,
        puntuacion: puntuacion,
        fecha: new Date().toLocaleString(),
        letra: obtenerCalificacionLetra(puntuacion)
    };
    
    puntuaciones.push(nuevaPuntuacion);
    
    // Limpiar campos
    document.getElementById('nombre-estudiante').value = '';
    document.getElementById('puntuacion').value = '';
    
    // Actualizar vista
    mostrarListaPuntuaciones();
    calcularEstadisticas();
    
    document.getElementById('nombre-estudiante').focus();
}

function obtenerCalificacionLetra(puntuacion) {
    if (puntuacion >= 90) return 'A';
    if (puntuacion >= 80) return 'B';
    if (puntuacion >= 70) return 'C';
    if (puntuacion >= 60) return 'D';
    return 'F';
}

function mostrarListaPuntuaciones() {
    const lista = document.getElementById('lista-puntuaciones');
    
    if (puntuaciones.length === 0) {
        lista.innerHTML = '<p>No hay puntuaciones registradas</p>';
        return;
    }
    
    const puntuacionesOrdenadas = [...puntuaciones].sort((a, b) => b.puntuacion - a.puntuacion);
    
    lista.innerHTML = `
        <h4>📋 Lista de Puntuaciones (${puntuaciones.length} registros)</h4>
        <div class="tabla-puntuaciones">
            <div class="header-tabla">
                <span>Nombre</span>
                <span>Puntuación</span>
                <span>Letra</span>
                <span>Fecha</span>
                <span>Acciones</span>
            </div>
            ${puntuacionesOrdenadas.map(p => `
                <div class="fila-tabla">
                    <span>${p.nombre}</span>
                    <span>${p.puntuacion}</span>
                    <span class="letra-${p.letra.toLowerCase()}">${p.letra}</span>
                    <span>${p.fecha}</span>
                    <span>
                        <button onclick="eliminarPuntuacion(${p.id})" class="btn-eliminar">🗑️</button>
                    </span>
                </div>
            `).join('')}
        </div>
    `;
}

function eliminarPuntuacion(id) {
    if (confirm('¿Estás seguro de eliminar esta puntuación?')) {
        puntuaciones = puntuaciones.filter(p => p.id !== id);
        mostrarListaPuntuaciones();
        calcularEstadisticas();
        mostrarDistribucion();
    }
}

function calcularEstadisticas() {
    const estadisticas = document.getElementById('estadisticas');
    
    if (puntuaciones.length === 0) {
        estadisticas.innerHTML = '';
        return;
    }
    
    const valores = puntuaciones.map(p => p.puntuacion);
    const suma = valores.reduce((a, b) => a + b, 0);
    const promedio = suma / valores.length;
    const maximo = Math.max(...valores);
    const minimo = Math.min(...valores);
    const mediana = calcularMediana(valores);
    
    // Contar calificaciones por letra
    const conteoLetras = puntuaciones.reduce((acc, p) => {
        acc[p.letra] = (acc[p.letra] || 0) + 1;
        return acc;
    }, {});
    
    // Calcular porcentajes de aprobación
    const aprobados = puntuaciones.filter(p => p.puntuacion >= 60).length;
    const porcentajeAprobacion = (aprobados / puntuaciones.length) * 100;
    
    estadisticas.innerHTML = `
        <h4>📊 Estadísticas</h4>
        <div class="grid-estadisticas">
            <div class="stat-card">
                <div class="stat-valor">${promedio.toFixed(2)}</div>
                <div class="stat-label">Promedio</div>
            </div>
            <div class="stat-card">
                <div class="stat-valor">${maximo}</div>
                <div class="stat-label">Máximo</div>
            </div>
            <div class="stat-card">
                <div class="stat-valor">${minimo}</div>
                <div class="stat-label">Mínimo</div>
            </div>
            <div class="stat-card">
                <div class="stat-valor">${mediana.toFixed(2)}</div>
                <div class="stat-label">Mediana</div>
            </div>
            <div class="stat-card">
                <div class="stat-valor">${porcentajeAprobacion.toFixed(1)}%</div>
                <div class="stat-label">Aprobación</div>
            </div>
            <div class="stat-card">
                <div class="stat-valor">${puntuaciones.length}</div>
                <div class="stat-label">Total</div>
            </div>
        </div>
        
        <div class="distribucion-letras">
            <h5>Distribución por Calificaciones:</h5>
            ${Object.entries(conteoLetras).map(([letra, cantidad]) => `
                <div class="barra-letra">
                    <span class="letra-${letra.toLowerCase()}">${letra}: ${cantidad} (${((cantidad/puntuaciones.length)*100).toFixed(1)}%)</span>
                    <div class="barra-progreso">
                        <div class="progreso-${letra.toLowerCase()}" style="width: ${(cantidad/puntuaciones.length)*100}%"></div>
                    </div>
                </div>
            `).join('')}
        </div>
    `;
}

function calcularMediana(valores) {
    const ordenados = [...valores].sort((a, b) => a - b);
    const medio = Math.floor(ordenados.length / 2);
    
    if (ordenados.length % 2 === 0) {
        return (ordenados[medio - 1] + ordenados[medio]) / 2;
    } else {
        return ordenados[medio];
    }
}

function mostrarDistribucion() {
    const distribucion = document.getElementById('distribucion');
    
    if (puntuaciones.length === 0) {
        distribucion.innerHTML = '';
        return;
    }
    
    // Crear rangos de puntuación
    const rangos = {
        '90-100': 0, '80-89': 0, '70-79': 0, '60-69': 0, '50-59': 0, '0-49': 0
    };
    
    puntuaciones.forEach(p => {
        const punt = p.puntuacion;
        if (punt >= 90) rangos['90-100']++;
        else if (punt >= 80) rangos['80-89']++;
        else if (punt >= 70) rangos['70-79']++;
        else if (punt >= 60) rangos['60-69']++;
        else if (punt >= 50) rangos['50-59']++;
        else rangos['0-49']++;
    });
    
    const maxCantidad = Math.max(...Object.values(rangos));
    
    distribucion.innerHTML = `
        <h4>📈 Distribución de Puntuaciones</h4>
        <div class="histograma">
            ${Object.entries(rangos).map(([rango, cantidad]) => `
                <div class="barra-histograma">
                    <div class="barra" style="height: ${maxCantidad > 0 ? (cantidad/maxCantidad)*100 : 0}%">
                        <span class="valor-barra">${cantidad}</span>
                    </div>
                    <div class="etiqueta-rango">${rango}</div>
                </div>
            `).join('')}
        </div>
    `;
}

function exportarDatos() {
    if (puntuaciones.length === 0) {
        alert('❌ No hay datos para exportar');
        return;
    }
    
    const valores = puntuaciones.map(p => p.puntuacion);
    const suma = valores.reduce((a, b) => a + b, 0);
    const promedio = suma / valores.length;
    
    const datosExport = {
        fecha_exportacion: new Date().toLocaleString(),
        total_registros: puntuaciones.length,
        estadisticas: {
            promedio: promedio.toFixed(2),
            maximo: Math.max(...valores),
            minimo: Math.min(...valores),
            mediana: calcularMediana(valores).toFixed(2)
        },
        puntuaciones: puntuaciones
    };
    
    const dataStr = JSON.stringify(datosExport, null, 2);
    const dataBlob = new Blob([dataStr], {type: 'application/json'});
    const url = URL.createObjectURL(dataBlob);
    
    const link = document.createElement('a');
    link.href = url;
    link.download = `puntuaciones_${new Date().toISOString().split('T')[0]}.json`;
    link.click();
    
    URL.revokeObjectURL(url);
    alert('✅ Datos exportados exitosamente');
}

function limpiarTodo() {
    if (puntuaciones.length === 0) {
        alert('❌ No hay datos para limpiar');
        return;
    }
    
    if (confirm('¿Estás seguro de eliminar todas las puntuaciones?')) {
        puntuaciones = [];
        contadorId = 0;
        document.getElementById('lista-puntuaciones').innerHTML = '';
        document.getElementById('estadisticas').innerHTML = '';
        document.getElementById('distribucion').innerHTML = '';
        alert('✅ Todos los datos han sido eliminados');
    }
}

// Event listener para agregar puntuación con Enter
document.getElementById('puntuacion').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        agregarPuntuacion();
    }
});
```

## Estilos CSS para los Ejercicios

Para que los ejercicios se vean mejor, agrega estos estilos CSS:

```css
/* Estilos generales para los ejercicios */
.inputs, .botones, .controles {
    margin: 15px 0;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.resultado, .resultado-detallado {
    margin: 15px 0;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    background-color: #f9f9f9;
    min-height: 50px;
}

/* Ejercicio 1: Calculadora Básica */
#calculadora-basica input {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 150px;
}

#calculadora-basica button {
    padding: 10px 15px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

#calculadora-basica button:hover {
    background-color: #0056b3;
}

/* Ejercicio 2: Geometría */
.inputs-dinamicos {
    margin: 15px 0;
}

.inputs-dinamicos input {
    margin: 5px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.formulas {
    margin: 10px 0;
    padding: 10px;
    background-color: #e7f3ff;
    border-radius: 4px;
}

/* Ejercicio 3: Conversor */
.conversion-inputs {
    display: flex;
    align-items: center;
    gap: 15px;
    margin: 20px 0;
}

.input-group {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.conversion-arrow {
    font-size: 24px;
    color: #007bff;
}

.historial {
    margin-top: 20px;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 5px;
}

/* Ejercicio 4: Propinas */
.propina-botones {
    display: flex;
    gap: 10px;
    margin: 10px 0;
}

.btn-propina {
    padding: 8px 12px;
    border: 2px solid #007bff;
    background-color: white;
    color: #007bff;
    border-radius: 4px;
    cursor: pointer;
}

.btn-propina.activo, .btn-propina:hover {
    background-color: #007bff;
    color: white;
}

.resumen-cuenta {
    background-color: white;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #ddd;
}

.linea-resumen {
    display: flex;
    justify-content: space-between;
    margin: 8px 0;
}

.linea-resumen.total {
    border-top: 2px solid #333;
    padding-top: 8px;
    font-size: 1.1em;
}

/* Ejercicio 5: Puntuaciones */
.tabla-puntuaciones {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 2fr 1fr;
    gap: 10px;
    margin: 15px 0;
}

.header-tabla {
    display: contents;
    font-weight: bold;
    background-color: #f8f9fa;
}

.fila-tabla {
    display: contents;
}

.fila-tabla > span {
    padding: 8px;
    border-bottom: 1px solid #eee;
}

.grid-estadisticas {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 15px;
    margin: 20px 0;
}

.stat-card {
    text-align: center;
    padding: 15px;
    background-color: white;
    border-radius: 8px;
    border: 1px solid #ddd;
}

.stat-valor {
    font-size: 24px;
    font-weight: bold;
    color: #007bff;
}

.stat-label {
    font-size: 12px;
    color: #666;
    margin-top: 5px;
}

.letra-a { color: #28a745; }
.letra-b { color: #17a2b8; }
.letra-c { color: #ffc107; }
.letra-d { color: #fd7e14; }
.letra-f { color: #dc3545; }

.histograma {
    display: flex;
    align-items: end;
    gap: 10px;
    height: 200px;
    margin: 20px 0;
}

.barra-histograma {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.barra {
    width: 100%;
    background-color: #007bff;
    display: flex;
    align-items: end;
    justify-content: center;
    min-height: 20px;
    border-radius: 4px 4px 0 0;
}

.valor-barra {
    color: white;
    font-weight: bold;
    padding: 5px;
}

.etiqueta-rango {
    margin-top: 10px;
    font-size: 12px;
    text-align: center;
}
```

## Instrucciones para Resolver

1. **Copia el código HTML y JavaScript** de cada ejercicio en archivos separados
2. **Agrega los estilos CSS** para mejorar la apariencia
3. **Prueba cada funcionalidad** paso a paso
4. **Modifica y experimenta** con diferentes valores y casos
5. **Agrega validaciones adicionales** según consideres necesario

Estos ejercicios te ayudarán a practicar:
- Manipulación del DOM
- Eventos de click
- Validación de formularios
- Cálculos matemáticos
- Modificación dinámica de contenido
- Gestión de estado en JavaScript

¡Diviértete programando y aprendiendo! 🚀


