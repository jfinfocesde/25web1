# Tutorial: M√≥dulo JavaScript Gen√©rico para Consumir APIs

## ¬øQu√© es un M√≥dulo Reutilizable?

Un m√≥dulo reutilizable es un conjunto de funciones que puedes usar en diferentes proyectos sin tener que escribir el mismo c√≥digo una y otra vez. En este tutorial crearemos un m√≥dulo para consumir APIs de forma f√°cil y consistente.

## ¬øPor qu√© crear un m√≥dulo para APIs?

- ‚úÖ **Reutilizable** - √ösalo en cualquier proyecto
- ‚úÖ **Consistente** - Mismo comportamiento siempre
- ‚úÖ **F√°cil mantenimiento** - Cambios en un solo lugar
- ‚úÖ **Menos errores** - C√≥digo probado y confiable
- ‚úÖ **M√°s r√°pido** - No reescribir c√≥digo

## El M√≥dulo API B√°sico

### Archivo: `api-client.js`

```javascript
/**
 * M√≥dulo gen√©rico para consumir APIs
 * Versi√≥n b√°sica y f√°cil de entender
 */

class ApiClient {
    constructor(baseURL = '') {
        this.baseURL = baseURL;
        this.defaultHeaders = {
            'Content-Type': 'application/json'
        };
    }

    /**
     * M√©todo privado para hacer peticiones HTTP
     */
    async _request(endpoint, options = {}) {
        try {
            // Construir la URL completa
            const url = this.baseURL + endpoint;
            
            // Configurar opciones por defecto
            const config = {
                headers: { ...this.defaultHeaders, ...options.headers },
                ...options
            };

            // Hacer la petici√≥n
            const response = await fetch(url, config);
            
            // Verificar si la respuesta es exitosa
            if (!response.ok) {
                throw new Error(`Error ${response.status}: ${response.statusText}`);
            }

            // Intentar parsear como JSON
            const data = await response.json();
            return data;

        } catch (error) {
            console.error('Error en petici√≥n API:', error);
            throw error;
        }
    }

    /**
     * GET - Obtener datos
     */
    async get(endpoint, headers = {}) {
        return this._request(endpoint, {
            method: 'GET',
            headers
        });
    }

    /**
     * POST - Crear datos
     */
    async post(endpoint, data = {}, headers = {}) {
        return this._request(endpoint, {
            method: 'POST',
            headers,
            body: JSON.stringify(data)
        });
    }

    /**
     * PUT - Actualizar datos completos
     */
    async put(endpoint, data = {}, headers = {}) {
        return this._request(endpoint, {
            method: 'PUT',
            headers,
            body: JSON.stringify(data)
        });
    }

    /**
     * PATCH - Actualizar datos parciales
     */
    async patch(endpoint, data = {}, headers = {}) {
        return this._request(endpoint, {
            method: 'PATCH',
            headers,
            body: JSON.stringify(data)
        });
    }

    /**
     * DELETE - Eliminar datos
     */
    async delete(endpoint, headers = {}) {
        return this._request(endpoint, {
            method: 'DELETE',
            headers
        });
    }

    /**
     * Configurar headers por defecto
     */
    setDefaultHeaders(headers) {
        this.defaultHeaders = { ...this.defaultHeaders, ...headers };
    }

    /**
     * Configurar token de autorizaci√≥n
     */
    setAuthToken(token) {
        this.setDefaultHeaders({
            'Authorization': `Bearer ${token}`
        });
    }
}

// Exportar para usar en otros archivos
// Para navegador (sin m√≥dulos ES6)
if (typeof window !== 'undefined') {
    window.ApiClient = ApiClient;
}

// Para Node.js o m√≥dulos ES6
if (typeof module !== 'undefined' && module.exports) {
    module.exports = ApiClient;
}
```

## Ejemplo Pr√°ctico Completo

### Archivo: `index.html`

```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo API - Ejemplo Pr√°ctico</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .section h3 {
            color: #007bff;
            margin-bottom: 15px;
        }

        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #0056b3;
        }

        .delete-btn {
            background: #dc3545;
        }

        .delete-btn:hover {
            background: #c82333;
        }

        .update-btn {
            background: #28a745;
        }

        .update-btn:hover {
            background: #218838;
        }

        .result {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
            white-space: pre-wrap;
            font-family: monospace;
            max-height: 200px;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        textarea {
            height: 80px;
            resize: vertical;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ M√≥dulo API en Acci√≥n</h1>

        <!-- Secci√≥n GET -->
        <div class="section">
            <h3>üì• GET - Obtener Datos</h3>
            <button onclick="getUsers()">Obtener Usuarios</button>
            <button onclick="getUser('3db6ebe4-43c7-4a3d-802a-5ab44814c369')">Obtener Usuario Espec√≠fico</button>
            <div id="getResult" class="result"></div>
        </div>

        <!-- Secci√≥n POST -->
        <div class="section">
            <h3>üì§ POST - Crear Datos</h3>
            <div class="form-group">
                <label>Nombre del Usuario:</label>
                <input type="text" id="userName" placeholder="Nombre completo...">
            </div>
            <div class="form-group">
                <label>Email:</label>
                <input type="email" id="userEmail" placeholder="usuario@ejemplo.com">
            </div>
            <div class="form-group">
                <label>Username:</label>
                <input type="text" id="userUsername" placeholder="nombre_usuario">
            </div>
            <button onclick="createUser()">Crear Usuario</button>
            <div id="postResult" class="result"></div>
        </div>

        <!-- Secci√≥n PUT/PATCH -->
        <div class="section">
            <h3>‚úèÔ∏è PUT/PATCH - Actualizar Datos</h3>
            <div class="form-group">
                <label>ID del Usuario a actualizar:</label>
                <input type="text" id="updateId" value="3db6ebe4-43c7-4a3d-802a-5ab44814c369" placeholder="ID del usuario">
            </div>
            <div class="form-group">
                <label>Nuevo nombre:</label>
                <input type="text" id="updateName" placeholder="Nuevo nombre...">
            </div>
            <button class="update-btn" onclick="updateUser()">Actualizar Usuario (PUT)</button>
            <button class="update-btn" onclick="patchUser()">Actualizar Parcial (PATCH)</button>
            <div id="updateResult" class="result"></div>
        </div>

        <!-- Secci√≥n DELETE -->
        <div class="section">
            <h3>üóëÔ∏è DELETE - Eliminar Datos</h3>
            <div class="form-group">
                <label>ID del Usuario a eliminar:</label>
                <input type="text" id="deleteId" value="3db6ebe4-43c7-4a3d-802a-5ab44814c369" placeholder="ID del usuario">
            </div>
            <button class="delete-btn" onclick="deleteUser()">Eliminar Usuario</button>
            <div id="deleteResult" class="result"></div>
        </div>
    </div>

    <!-- Incluir nuestro m√≥dulo -->
    <script src="api-client.js"></script>
    
    <script>
        // Crear una instancia del cliente API
const api = new ApiClient('https://playground.mockoon.com');

        // Funci√≥n para mostrar resultados
        function showResult(elementId, data) {
            const element = document.getElementById(elementId);
            element.textContent = JSON.stringify(data, null, 2);
        }

        // Funci√≥n para mostrar errores
        function showError(elementId, error) {
            const element = document.getElementById(elementId);
            element.textContent = `‚ùå Error: ${error.message}`;
            element.style.color = 'red';
        }

        // GET - Obtener usuarios
        async function getUsers() {
            try {
                const users = await api.get('/users');
                showResult('getResult', users);
            } catch (error) {
                showError('getResult', error);
            }
        }

        // GET - Obtener un usuario espec√≠fico
        async function getUser(id) {
            try {
                const user = await api.get(`/users/${id}`);
                showResult('getResult', user);
            } catch (error) {
                showError('getResult', error);
            }
        }

        // POST - Crear nuevo usuario
        async function createUser() {
            const name = document.getElementById('userName').value;
            const email = document.getElementById('userEmail').value;
            const username = document.getElementById('userUsername').value;

            if (!name || !email || !username) {
                showError('postResult', new Error('Nombre, email y username son requeridos'));
                return;
            }

            try {
                const newUser = await api.post('/users', {
                    name: name,
                    email: email,
                    username: username,
                    phone: "555-0123",
                    address: {
                        street: "123 Main St",
                        city: "Anytown",
                        state: "State",
                        zip: "12345"
                    },
                    isActive: true
                });
                showResult('postResult', newUser);
                
                // Limpiar formulario
                document.getElementById('userName').value = '';
                document.getElementById('userEmail').value = '';
                document.getElementById('userUsername').value = '';
            } catch (error) {
                showError('postResult', error);
            }
        }

        // PUT - Actualizar usuario completo
        async function updateUser() {
            const id = document.getElementById('updateId').value;
            const name = document.getElementById('updateName').value;

            if (!name) {
                showError('updateResult', new Error('El nombre es requerido'));
                return;
            }

            try {
                const updatedUser = await api.put(`/users/${id}`, {
                    id: id,
                    name: name,
                    username: name.toLowerCase().replace(' ', '.'),
                    email: `${name.toLowerCase().replace(' ', '.')}@example.com`,
                    phone: "555-0123",
                    address: {
                        street: "123 Updated St",
                        city: "Updated City",
                        state: "Updated State",
                        zip: "54321"
                    },
                    isActive: true
                });
                showResult('updateResult', updatedUser);
            } catch (error) {
                showError('updateResult', error);
            }
        }

        // PATCH - Actualizar usuario parcial
        async function patchUser() {
            const id = document.getElementById('updateId').value;
            const name = document.getElementById('updateName').value;

            if (!name) {
                showError('updateResult', new Error('El nombre es requerido'));
                return;
            }

            try {
                const patchedUser = await api.patch(`/users/${id}`, {
                    name: name
                });
                showResult('updateResult', patchedUser);
            } catch (error) {
                showError('updateResult', error);
            }
        }

        // DELETE - Eliminar usuario
        async function deleteUser() {
            const id = document.getElementById('deleteId').value;

            try {
                const result = await api.delete(`/users/${id}`);
                showResult('deleteResult', result);
            } catch (error) {
                showError('deleteResult', error);
            }
        }

        // Ejemplo de configurar headers personalizados
        function setupCustomHeaders() {
            // Configurar headers por defecto
            api.setDefaultHeaders({
                'X-Custom-Header': 'Mi-Aplicacion',
                'X-Version': '1.0'
            });

            // Configurar token de autorizaci√≥n (ejemplo)
            // api.setAuthToken('tu-token-aqui');
        }

        // Configurar headers al cargar la p√°gina
        setupCustomHeaders();
    </script>
</body>
</html>
```

## Segundo Ejemplo: Frontend Moderno con TailwindCSS

Aqu√≠ tienes un ejemplo m√°s elaborado usando **TailwindCSS** para un dise√±o moderno y responsivo:

```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ API Client - Dise√±o Moderno</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#1e40af',
                        success: '#10b981',
                        danger: '#ef4444',
                        warning: '#f59e0b'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800 mb-4">üöÄ API Client Moderno</h1>
            <p class="text-gray-600 text-lg">Gesti√≥n de usuarios con dise√±o responsivo</p>
        </div>

        <!-- Grid Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Secci√≥n GET -->
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-200">
                <div class="flex items-center mb-6">
                    <div class="bg-blue-100 p-3 rounded-lg mr-4">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-800">üì• Obtener Datos</h3>
                </div>
                
                <div class="space-y-3 mb-6">
                    <button onclick="getAllUsers()" class="w-full bg-primary hover:bg-secondary text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                        Obtener Todos los Usuarios
                    </button>
                    <button onclick="getSpecificUser()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                        Obtener Usuario Espec√≠fico
                    </button>
                </div>
                
                <div id="getResultModern" class="bg-gray-50 border border-gray-200 rounded-lg p-4 min-h-[200px] overflow-auto font-mono text-sm"></div>
            </div>

            <!-- Secci√≥n POST -->
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-200">
                <div class="flex items-center mb-6">
                    <div class="bg-green-100 p-3 rounded-lg mr-4">
                        <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-800">üì§ Crear Usuario</h3>
                </div>
                
                <form class="space-y-4 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nombre Completo</label>
                        <input type="text" id="modernUserName" placeholder="Ej: Sean Kris" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="modernUserEmail" placeholder="usuario@ejemplo.com" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tel√©fono</label>
                        <input type="tel" id="modernUserPhone" placeholder="271-410-4874 x85762" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Direcci√≥n</label>
                        <input type="text" id="modernUserAddress" placeholder="623 Jailyn Village, Pasadena, IA 54138" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de Nacimiento</label>
                        <input type="date" id="modernUserBirthdate" value="2005-07-26" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200">
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="modernUserActive" checked 
                               class="w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary focus:ring-2">
                        <label for="modernUserActive" class="ml-2 text-sm font-medium text-gray-700">Usuario Activo</label>
                    </div>
                </form>
                
                <button onclick="createModernUser()" class="w-full bg-success hover:bg-green-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                    Crear Usuario
                </button>
                
                <div id="postResultModern" class="bg-gray-50 border border-gray-200 rounded-lg p-4 mt-6 min-h-[100px] overflow-auto font-mono text-sm"></div>
            </div>

            <!-- Secci√≥n UPDATE -->
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-200">
                <div class="flex items-center mb-6">
                    <div class="bg-yellow-100 p-3 rounded-lg mr-4">
                        <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-800">‚úèÔ∏è Actualizar Usuario</h3>
                </div>
                
                <div class="space-y-4 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ID del Usuario</label>
                        <input type="text" id="modernUpdateId" value="dabf8912-0eb2-4648-98df-7d113a15bbfc" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nuevo Nombre</label>
                        <input type="text" id="modernUpdateName" placeholder="Nuevo nombre..." 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200">
                    </div>
                </div>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6">
                    <button onclick="updateModernUser()" class="bg-warning hover:bg-yellow-500 text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                        Actualizar (PUT)
                    </button>
                    <button onclick="patchModernUser()" class="bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                        Parcial (PATCH)
                    </button>
                </div>
                
                <div id="updateResultModern" class="bg-gray-50 border border-gray-200 rounded-lg p-4 min-h-[100px] overflow-auto font-mono text-sm"></div>
            </div>

            <!-- Secci√≥n DELETE -->
            <div class="bg-white rounded-xl shadow-lg p-6 border border-gray-200">
                <div class="flex items-center mb-6">
                    <div class="bg-red-100 p-3 rounded-lg mr-4">
                        <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-800">üóëÔ∏è Eliminar Usuario</h3>
                </div>
                
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ID del Usuario a Eliminar</label>
                    <input type="text" id="modernDeleteId" value="dabf8912-0eb2-4648-98df-7d113a15bbfc" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200">
                </div>
                
                <button onclick="deleteModernUser()" class="w-full bg-danger hover:bg-red-600 text-white font-medium py-3 px-4 rounded-lg transition duration-200 transform hover:scale-105">
                    Eliminar Usuario
                </button>
                
                <div id="deleteResultModern" class="bg-gray-50 border border-gray-200 rounded-lg p-4 mt-6 min-h-[100px] overflow-auto font-mono text-sm"></div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="mt-8 bg-white rounded-xl shadow-lg p-4 border border-gray-200">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <div class="w-3 h-3 bg-green-400 rounded-full mr-2 animate-pulse"></div>
                    <span class="text-sm text-gray-600">API Status: Conectado a Mockoon Playground</span>
                </div>
                <div class="text-sm text-gray-500">
                    Endpoint: https://playground.mockoon.com/users
                </div>
            </div>
        </div>
    </div>

    <!-- Incluir nuestro m√≥dulo -->
    <script src="api-client.js"></script>
    
    <script>
        // Crear una instancia del cliente API
        const modernApi = new ApiClient('https://playground.mockoon.com');

        // Funci√≥n para mostrar resultados con mejor formato
        function showModernResult(elementId, data) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="text-green-600 font-semibold mb-2">‚úÖ √âxito:</div><pre class="text-gray-800">${JSON.stringify(data, null, 2)}</pre>`;
            element.className = element.className.replace('border-gray-200', 'border-green-200 bg-green-50');
        }

        // Funci√≥n para mostrar errores con mejor formato
        function showModernError(elementId, error) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="text-red-600 font-semibold mb-2">‚ùå Error:</div><pre class="text-red-800">${error.message}</pre>`;
            element.className = element.className.replace('border-gray-200', 'border-red-200 bg-red-50');
        }

        // GET - Obtener todos los usuarios
        async function getAllUsers() {
            try {
                const users = await modernApi.get('/users');
                showModernResult('getResultModern', users);
            } catch (error) {
                showModernError('getResultModern', error);
            }
        }

        // GET - Obtener usuario espec√≠fico
        async function getSpecificUser() {
            try {
                const user = await modernApi.get('/users/dabf8912-0eb2-4648-98df-7d113a15bbfc');
                showModernResult('getResultModern', user);
            } catch (error) {
                showModernError('getResultModern', error);
            }
        }

        // POST - Crear nuevo usuario con modelo simplificado
        async function createModernUser() {
            const name = document.getElementById('modernUserName').value;
            const email = document.getElementById('modernUserEmail').value;
            const phone = document.getElementById('modernUserPhone').value;
            const address = document.getElementById('modernUserAddress').value;
            const birthdate = document.getElementById('modernUserBirthdate').value;
            const isActive = document.getElementById('modernUserActive').checked;

            if (!name || !email) {
                showModernError('postResultModern', new Error('Nombre y email son requeridos'));
                return;
            }

            try {
                const newUser = await modernApi.post('/users', {
                    id: crypto.randomUUID(), // Generar ID √∫nico
                    name: name,
                    email: email,
                    phone: phone || "555-0123",
                    address: address || "Direcci√≥n no especificada",
                    birthdate: birthdate,
                    isActive: isActive
                });
                showModernResult('postResultModern', newUser);
                
                // Limpiar formulario
                document.getElementById('modernUserName').value = '';
                document.getElementById('modernUserEmail').value = '';
                document.getElementById('modernUserPhone').value = '';
                document.getElementById('modernUserAddress').value = '';
                document.getElementById('modernUserBirthdate').value = '2005-07-26';
                document.getElementById('modernUserActive').checked = true;
            } catch (error) {
                showModernError('postResultModern', error);
            }
        }

        // PUT - Actualizar usuario completo
        async function updateModernUser() {
            const id = document.getElementById('modernUpdateId').value;
            const name = document.getElementById('modernUpdateName').value;

            if (!name) {
                showModernError('updateResultModern', new Error('El nombre es requerido'));
                return;
            }

            try {
                const updatedUser = await modernApi.put(`/users/${id}`, {
                    id: id,
                    name: name,
                    email: `${name.toLowerCase().replace(' ', '.')}@ejemplo.com`,
                    phone: "555-0123",
                    address: "Direcci√≥n actualizada",
                    birthdate: "2005-07-26",
                    isActive: true
                });
                showModernResult('updateResultModern', updatedUser);
            } catch (error) {
                showModernError('updateResultModern', error);
            }
        }

        // PATCH - Actualizar usuario parcial
        async function patchModernUser() {
            const id = document.getElementById('modernUpdateId').value;
            const name = document.getElementById('modernUpdateName').value;

            if (!name) {
                showModernError('updateResultModern', new Error('El nombre es requerido'));
                return;
            }

            try {
                const patchedUser = await modernApi.patch(`/users/${id}`, {
                    name: name
                });
                showModernResult('updateResultModern', patchedUser);
            } catch (error) {
                showModernError('updateResultModern', error);
            }
        }

        // DELETE - Eliminar usuario
        async function deleteModernUser() {
            const id = document.getElementById('modernDeleteId').value;

            try {
                const result = await modernApi.delete(`/users/${id}`);
                showModernResult('deleteResultModern', result);
            } catch (error) {
                showModernError('deleteResultModern', error);
            }
        }
    </script>
</body>
</html>
```

## Explicaci√≥n del C√≥digo

### 1. Estructura del M√≥dulo

```javascript
class ApiClient {
    constructor(baseURL = '') {
        this.baseURL = baseURL;           // URL base de la API
        this.defaultHeaders = { ... };    // Headers por defecto
    }
}
```

### 2. M√©todo Privado `_request`

```javascript
async _request(endpoint, options = {}) {
    // 1. Construir URL completa
    // 2. Configurar opciones
    // 3. Hacer petici√≥n con fetch
    // 4. Verificar respuesta
    // 5. Parsear JSON
    // 6. Manejar errores
}
```

### 3. M√©todos P√∫blicos

| M√©todo | Prop√≥sito | Ejemplo |
|--------|-----------|---------|
| `get()` | Obtener datos | `api.get('/users')` |
| `post()` | Crear datos | `api.post('/users', data)` |
| `put()` | Actualizar completo | `api.put('/users/id', data)` |
| `patch()` | Actualizar parcial | `api.patch('/users/id', data)` |
| `delete()` | Eliminar datos | `api.delete('/users/id')` |

## C√≥mo Usar el M√≥dulo

### 1. Crear Instancia

```javascript
// API sin URL base
const api = new ApiClient();

// API con URL base
const api = new ApiClient('https://api.ejemplo.com');
```

### 2. Hacer Peticiones

```javascript
// GET simple
const usuarios = await api.get('/usuarios');

// POST con datos
const nuevoUsuario = await api.post('/usuarios', {
    nombre: 'Juan',
    email: 'juan@email.com'
});

// PUT para actualizar
const usuarioActualizado = await api.put('/usuarios/1', {
    nombre: 'Juan Carlos',
    email: 'juan.carlos@email.com'
});

// DELETE para eliminar
await api.delete('/usuarios/1');
```

### 3. Configurar Headers

```javascript
// Headers por defecto
api.setDefaultHeaders({
    'X-API-Key': 'tu-api-key',
    'X-Version': '1.0'
});

// Token de autorizaci√≥n
api.setAuthToken('tu-jwt-token');
```

## Manejo de Errores

### Tipos de Errores

```javascript
try {
    const data = await api.get('/endpoint');
} catch (error) {
    if (error.message.includes('404')) {
        console.log('Recurso no encontrado');
    } else if (error.message.includes('500')) {
        console.log('Error del servidor');
    } else {
        console.log('Error de red o conexi√≥n');
    }
}
```

### Validaci√≥n de Datos

```javascript
async function crearUsuario(datos) {
    // Validar antes de enviar
    if (!datos.nombre || !datos.email) {
        throw new Error('Nombre y email son requeridos');
    }

    try {
        return await api.post('/usuarios', datos);
    } catch (error) {
        console.error('Error al crear usuario:', error);
        throw error;
    }
}
```

## Pasos para Probar

1. **Crear los archivos** - Guarda `api-client.js` e `index.html`
2. **Abrir en navegador** - Haz doble clic en `index.html`
3. **Probar funciones**:
   - Obtener usuarios
- Crear nuevos usuarios
- Actualizar usuarios existentes
- Eliminar usuarios

## Ventajas del M√≥dulo

- ‚úÖ **Reutilizable** - √ösalo en cualquier proyecto
- ‚úÖ **Consistente** - Mismo comportamiento siempre
- ‚úÖ **Manejo de errores** - Centralizado y consistente
- ‚úÖ **Configuraci√≥n flexible** - Headers y tokens personalizables
- ‚úÖ **F√°cil de usar** - API simple y clara


## Casos de Uso Reales

### API de E-commerce

```javascript
const tiendaAPI = new ApiClient('https://api.mitienda.com');

// Obtener productos
const productos = await tiendaAPI.get('/productos');

// Agregar al carrito
const carrito = await tiendaAPI.post('/carrito', {
    productoId: 123,
    cantidad: 2
});
```

### API de Usuarios

```javascript
const usuariosAPI = new ApiClient('https://api.usuarios.com');
usuariosAPI.setAuthToken('jwt-token');

// Perfil del usuario
const perfil = await usuariosAPI.get('/perfil');

// Actualizar perfil
await usuariosAPI.patch('/perfil', {
    nombre: 'Nuevo Nombre'
});
```

